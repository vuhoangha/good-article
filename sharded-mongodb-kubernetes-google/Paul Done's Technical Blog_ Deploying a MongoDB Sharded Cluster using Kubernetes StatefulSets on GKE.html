<!DOCTYPE html>
<!-- saved from url=(0068)http://pauldone.blogspot.com/2017/07/sharded-mongodb-kubernetes.html -->
<html class="v2 gr__pauldone_blogspot_com" dir="ltr" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link href="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/1938605287-css_bundle_v2.css" rel="stylesheet" type="text/css">
<meta content="width=1100" name="viewport">

<meta content="blogger" name="generator">
<link href="http://pauldone.blogspot.com/favicon.ico" rel="icon" type="image/x-icon">
<link href="http://pauldone.blogspot.com/2017/07/sharded-mongodb-kubernetes.html" rel="canonical">
<link rel="alternate" type="application/atom+xml" title="Paul Done&#39;s Technical Blog - Atom" href="http://pauldone.blogspot.com/feeds/posts/default">
<link rel="alternate" type="application/rss+xml" title="Paul Done&#39;s Technical Blog - RSS" href="http://pauldone.blogspot.com/feeds/posts/default?alt=rss">
<link rel="service.post" type="application/atom+xml" title="Paul Done&#39;s Technical Blog - Atom" href="https://www.blogger.com/feeds/1304066656993695443/posts/default">

<link rel="alternate" type="application/atom+xml" title="Paul Done&#39;s Technical Blog - Atom" href="http://pauldone.blogspot.com/feeds/1589304614399617387/comments/default">
<!--[if IE]><script type="text/javascript" src="https://www.blogger.com/static/v1/jsbin/1953397912-ieretrofit.js"></script>
<![endif]-->
<link href="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/k1.png" rel="image_src">
<meta content="http://pauldone.blogspot.com/2017/07/sharded-mongodb-kubernetes.html" property="og:url">
<meta content="Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE" property="og:title">
<meta content="[Part 4 in a series of posts about running MongoDB on Kubernetes, with the Google  Kubernetes  Engine (GKE). For this post, a newer  GitHub ..." property="og:description">
<meta content="https://4.bp.blogspot.com/-rxa7MdqxlrQ/WWtjlq7cwmI/AAAAAAAAAjk/dHEcDHy2AyoyUV7y0YXQ1Ia18leTCZTTwCLcBGAs/w1200-h630-p-k-no-nu/k1.png" property="og:image">
<!--[if IE]> <script> (function() { var html5 = ("abbr,article,aside,audio,canvas,datalist,details," + "figure,footer,header,hgroup,mark,menu,meter,nav,output," + "progress,section,time,video").split(','); for (var i = 0; i < html5.length; i++) { document.createElement(html5[i]); } try { document.execCommand('BackgroundImageCache', false, true); } catch(e) {} })(); </script> <![endif]-->
<title>Paul Done's Technical Blog: Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE</title>
<style id="page-skin-1" type="text/css"><!--
/*
-----------------------------------------------
Blogger Template Style
Name:     Awesome Inc.
Designer: Tina Chen
URL:      tinachen.org
----------------------------------------------- */

/* Content
----------------------------------------------- */
body {
font: normal normal 13px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
color: #444444;
background: #eeeeee none repeat scroll top left;
}
html body .content-outer {
min-width: 0;
max-width: 100%;
width: 100%;
}
a:link {
text-decoration: none;
color: #3778cd;
}
a:visited {
text-decoration: none;
color: #4d469c;
}
a:hover {
text-decoration: underline;
color: #3778cd;
}
.body-fauxcolumn-outer .cap-top {
position: absolute;
z-index: 1;
height: 276px;
width: 100%;
background: transparent none repeat-x scroll top left;
_background-image: none;
}
/* Columns
----------------------------------------------- */
.content-inner {
padding: 0;
}
.header-inner .section {
margin: 0 16px;
}
.tabs-inner .section {
margin: 0 16px;
}
.main-inner {
padding-top: 30px;
}
.main-inner .column-center-inner,
.main-inner .column-left-inner,
.main-inner .column-right-inner {
padding: 0 5px;
}
*+html body .main-inner .column-center-inner {
margin-top: -30px;
}
#layout .main-inner .column-center-inner {
margin-top: 0;
}
/* Header
----------------------------------------------- */
.header-outer {
margin: 0 0 0 0;
background: transparent none repeat scroll 0 0;
}
.Header h1 {
font: normal bold 40px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
color: #444444;
text-shadow: 0 0 -1px #000000;
}
.Header h1 a {
color: #444444;
}
.Header .description {
font: normal normal 14px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
color: #444444;
}
.header-inner .Header .titlewrapper,
.header-inner .Header .descriptionwrapper {
padding-left: 0;
padding-right: 0;
margin-bottom: 0;
}
.header-inner .Header .titlewrapper {
padding-top: 22px;
}
/* Tabs
----------------------------------------------- */
.tabs-outer {
overflow: hidden;
position: relative;
background: #eeeeee url(//www.blogblog.com/1kt/awesomeinc/tabs_gradient_light.png) repeat scroll 0 0;
}
#layout .tabs-outer {
overflow: visible;
}
.tabs-cap-top, .tabs-cap-bottom {
position: absolute;
width: 100%;
border-top: 1px solid #999999;
}
.tabs-cap-bottom {
bottom: 0;
}
.tabs-inner .widget li a {
display: inline-block;
margin: 0;
padding: .6em 1.5em;
font: normal bold 14px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
color: #444444;
border-top: 1px solid #999999;
border-bottom: 1px solid #999999;
border-left: 1px solid #999999;
height: 16px;
line-height: 16px;
}
.tabs-inner .widget li:last-child a {
border-right: 1px solid #999999;
}
.tabs-inner .widget li.selected a, .tabs-inner .widget li a:hover {
background: #666666 url(//www.blogblog.com/1kt/awesomeinc/tabs_gradient_light.png) repeat-x scroll 0 -100px;
color: #ffffff;
}
/* Headings
----------------------------------------------- */
h2 {
font: normal bold 14px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
color: #444444;
}
/* Widgets
----------------------------------------------- */
.main-inner .section {
margin: 0 27px;
padding: 0;
}
.main-inner .column-left-outer,
.main-inner .column-right-outer {
margin-top: 0;
}
#layout .main-inner .column-left-outer,
#layout .main-inner .column-right-outer {
margin-top: 0;
}
.main-inner .column-left-inner,
.main-inner .column-right-inner {
background: transparent none repeat 0 0;
-moz-box-shadow: 0 0 0 rgba(0, 0, 0, .2);
-webkit-box-shadow: 0 0 0 rgba(0, 0, 0, .2);
-goog-ms-box-shadow: 0 0 0 rgba(0, 0, 0, .2);
box-shadow: 0 0 0 rgba(0, 0, 0, .2);
-moz-border-radius: 0;
-webkit-border-radius: 0;
-goog-ms-border-radius: 0;
border-radius: 0;
}
#layout .main-inner .column-left-inner,
#layout .main-inner .column-right-inner {
margin-top: 0;
}
.sidebar .widget {
font: normal normal 14px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
color: #444444;
}
.sidebar .widget a:link {
color: #3778cd;
}
.sidebar .widget a:visited {
color: #4d469c;
}
.sidebar .widget a:hover {
color: #3778cd;
}
.sidebar .widget h2 {
text-shadow: 0 0 -1px #000000;
}
.main-inner .widget {
background-color: #ffffff;
border: 1px solid #eeeeee;
padding: 0 15px 15px;
margin: 20px -16px;
-moz-box-shadow: 0 0 20px rgba(0, 0, 0, .2);
-webkit-box-shadow: 0 0 20px rgba(0, 0, 0, .2);
-goog-ms-box-shadow: 0 0 20px rgba(0, 0, 0, .2);
box-shadow: 0 0 20px rgba(0, 0, 0, .2);
-moz-border-radius: 0;
-webkit-border-radius: 0;
-goog-ms-border-radius: 0;
border-radius: 0;
}
.main-inner .widget h2 {
margin: 0 -15px;
padding: .6em 15px .5em;
border-bottom: 1px solid transparent;
}
.footer-inner .widget h2 {
padding: 0 0 .4em;
border-bottom: 1px solid transparent;
}
.main-inner .widget h2 + div, .footer-inner .widget h2 + div {
border-top: 1px solid #eeeeee;
padding-top: 8px;
}
.main-inner .widget .widget-content {
margin: 0 -15px;
padding: 7px 15px 0;
}
.main-inner .widget ul, .main-inner .widget #ArchiveList ul.flat {
margin: -8px -15px 0;
padding: 0;
list-style: none;
}
.main-inner .widget #ArchiveList {
margin: -8px 0 0;
}
.main-inner .widget ul li, .main-inner .widget #ArchiveList ul.flat li {
padding: .5em 15px;
text-indent: 0;
color: #666666;
border-top: 1px solid #eeeeee;
border-bottom: 1px solid transparent;
}
.main-inner .widget #ArchiveList ul li {
padding-top: .25em;
padding-bottom: .25em;
}
.main-inner .widget ul li:first-child, .main-inner .widget #ArchiveList ul.flat li:first-child {
border-top: none;
}
.main-inner .widget ul li:last-child, .main-inner .widget #ArchiveList ul.flat li:last-child {
border-bottom: none;
}
.post-body {
position: relative;
}
.main-inner .widget .post-body ul {
padding: 0 2.5em;
margin: .5em 0;
list-style: disc;
}
.main-inner .widget .post-body ul li {
padding: 0.25em 0;
margin-bottom: .25em;
color: #444444;
border: none;
}
.footer-inner .widget ul {
padding: 0;
list-style: none;
}
.widget .zippy {
color: #666666;
}
/* Posts
----------------------------------------------- */
body .main-inner .Blog {
padding: 0;
margin-bottom: 1em;
background-color: transparent;
border: none;
-moz-box-shadow: 0 0 0 rgba(0, 0, 0, 0);
-webkit-box-shadow: 0 0 0 rgba(0, 0, 0, 0);
-goog-ms-box-shadow: 0 0 0 rgba(0, 0, 0, 0);
box-shadow: 0 0 0 rgba(0, 0, 0, 0);
}
.main-inner .section:last-child .Blog:last-child {
padding: 0;
margin-bottom: 1em;
}
.main-inner .widget h2.date-header {
margin: 0 -15px 1px;
padding: 0 0 0 0;
font: normal normal 14px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
color: #444444;
background: transparent none no-repeat scroll top left;
border-top: 0 solid #eeeeee;
border-bottom: 1px solid transparent;
-moz-border-radius-topleft: 0;
-moz-border-radius-topright: 0;
-webkit-border-top-left-radius: 0;
-webkit-border-top-right-radius: 0;
border-top-left-radius: 0;
border-top-right-radius: 0;
position: static;
bottom: 100%;
right: 15px;
text-shadow: 0 0 -1px #000000;
}
.main-inner .widget h2.date-header span {
font: normal normal 14px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
display: block;
padding: .5em 15px;
border-left: 0 solid #eeeeee;
border-right: 0 solid #eeeeee;
}
.date-outer {
position: relative;
margin: 30px 0 20px;
padding: 0 15px;
background-color: #ffffff;
border: 1px solid #eeeeee;
-moz-box-shadow: 0 0 20px rgba(0, 0, 0, .2);
-webkit-box-shadow: 0 0 20px rgba(0, 0, 0, .2);
-goog-ms-box-shadow: 0 0 20px rgba(0, 0, 0, .2);
box-shadow: 0 0 20px rgba(0, 0, 0, .2);
-moz-border-radius: 0;
-webkit-border-radius: 0;
-goog-ms-border-radius: 0;
border-radius: 0;
}
.date-outer:first-child {
margin-top: 0;
}
.date-outer:last-child {
margin-bottom: 20px;
-moz-border-radius-bottomleft: 0;
-moz-border-radius-bottomright: 0;
-webkit-border-bottom-left-radius: 0;
-webkit-border-bottom-right-radius: 0;
-goog-ms-border-bottom-left-radius: 0;
-goog-ms-border-bottom-right-radius: 0;
border-bottom-left-radius: 0;
border-bottom-right-radius: 0;
}
.date-posts {
margin: 0 -15px;
padding: 0 15px;
clear: both;
}
.post-outer, .inline-ad {
border-top: 1px solid #eeeeee;
margin: 0 -15px;
padding: 15px 15px;
}
.post-outer {
padding-bottom: 10px;
}
.post-outer:first-child {
padding-top: 0;
border-top: none;
}
.post-outer:last-child, .inline-ad:last-child {
border-bottom: none;
}
.post-body {
position: relative;
}
.post-body img {
padding: 8px;
background: transparent;
border: 1px solid transparent;
-moz-box-shadow: 0 0 0 rgba(0, 0, 0, .2);
-webkit-box-shadow: 0 0 0 rgba(0, 0, 0, .2);
box-shadow: 0 0 0 rgba(0, 0, 0, .2);
-moz-border-radius: 0;
-webkit-border-radius: 0;
border-radius: 0;
}
h3.post-title, h4 {
font: normal bold 22px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
color: #444444;
}
h3.post-title a {
font: normal bold 22px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
color: #444444;
}
h3.post-title a:hover {
color: #3778cd;
text-decoration: underline;
}
.post-header {
margin: 0 0 1em;
}
.post-body {
line-height: 1.4;
}
.post-outer h2 {
color: #444444;
}
.post-footer {
margin: 1.5em 0 0;
}
#blog-pager {
padding: 15px;
font-size: 120%;
background-color: #ffffff;
border: 1px solid #eeeeee;
-moz-box-shadow: 0 0 20px rgba(0, 0, 0, .2);
-webkit-box-shadow: 0 0 20px rgba(0, 0, 0, .2);
-goog-ms-box-shadow: 0 0 20px rgba(0, 0, 0, .2);
box-shadow: 0 0 20px rgba(0, 0, 0, .2);
-moz-border-radius: 0;
-webkit-border-radius: 0;
-goog-ms-border-radius: 0;
border-radius: 0;
-moz-border-radius-topleft: 0;
-moz-border-radius-topright: 0;
-webkit-border-top-left-radius: 0;
-webkit-border-top-right-radius: 0;
-goog-ms-border-top-left-radius: 0;
-goog-ms-border-top-right-radius: 0;
border-top-left-radius: 0;
border-top-right-radius-topright: 0;
margin-top: 1em;
}
.blog-feeds, .post-feeds {
margin: 1em 0;
text-align: center;
color: #444444;
}
.blog-feeds a, .post-feeds a {
color: #3778cd;
}
.blog-feeds a:visited, .post-feeds a:visited {
color: #4d469c;
}
.blog-feeds a:hover, .post-feeds a:hover {
color: #3778cd;
}
.post-outer .comments {
margin-top: 2em;
}
/* Comments
----------------------------------------------- */
.comments .comments-content .icon.blog-author {
background-repeat: no-repeat;
background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEgAACxIB0t1+/AAAAAd0SU1FB9sLFwMeCjjhcOMAAAD+SURBVDjLtZSvTgNBEIe/WRRnm3U8RC1neQdsm1zSBIU9VVF1FkUguQQsD9ITmD7ECZIJSE4OZo9stoVjC/zc7ky+zH9hXwVwDpTAWWLrgS3QAe8AZgaAJI5zYAmc8r0G4AHYHQKVwII8PZrZFsBFkeRCABYiMh9BRUhnSkPTNCtVXYXURi1FpBDgArj8QU1eVXUzfnjv7yP7kwu1mYrkWlU33vs1QNu2qU8pwN0UpKoqokjWwCztrMuBhEhmh8bD5UDqur75asbcX0BGUB9/HAMB+r32hznJgXy2v0sGLBcyAJ1EK3LFcbo1s91JeLwAbwGYu7TP/3ZGfnXYPgAVNngtqatUNgAAAABJRU5ErkJggg==);
}
.comments .comments-content .loadmore a {
border-top: 1px solid #999999;
border-bottom: 1px solid #999999;
}
.comments .continue {
border-top: 2px solid #999999;
}
/* Footer
----------------------------------------------- */
.footer-outer {
margin: -20px 0 -1px;
padding: 20px 0 0;
color: #444444;
overflow: hidden;
}
.footer-fauxborder-left {
border-top: 1px solid #eeeeee;
background: #ffffff none repeat scroll 0 0;
-moz-box-shadow: 0 0 20px rgba(0, 0, 0, .2);
-webkit-box-shadow: 0 0 20px rgba(0, 0, 0, .2);
-goog-ms-box-shadow: 0 0 20px rgba(0, 0, 0, .2);
box-shadow: 0 0 20px rgba(0, 0, 0, .2);
margin: 0 -20px;
}
/* Mobile
----------------------------------------------- */
body.mobile {
background-size: auto;
}
.mobile .body-fauxcolumn-outer {
background: transparent none repeat scroll top left;
}
*+html body.mobile .main-inner .column-center-inner {
margin-top: 0;
}
.mobile .main-inner .widget {
padding: 0 0 15px;
}
.mobile .main-inner .widget h2 + div,
.mobile .footer-inner .widget h2 + div {
border-top: none;
padding-top: 0;
}
.mobile .footer-inner .widget h2 {
padding: 0.5em 0;
border-bottom: none;
}
.mobile .main-inner .widget .widget-content {
margin: 0;
padding: 7px 0 0;
}
.mobile .main-inner .widget ul,
.mobile .main-inner .widget #ArchiveList ul.flat {
margin: 0 -15px 0;
}
.mobile .main-inner .widget h2.date-header {
right: 0;
}
.mobile .date-header span {
padding: 0.4em 0;
}
.mobile .date-outer:first-child {
margin-bottom: 0;
border: 1px solid #eeeeee;
-moz-border-radius-topleft: 0;
-moz-border-radius-topright: 0;
-webkit-border-top-left-radius: 0;
-webkit-border-top-right-radius: 0;
-goog-ms-border-top-left-radius: 0;
-goog-ms-border-top-right-radius: 0;
border-top-left-radius: 0;
border-top-right-radius: 0;
}
.mobile .date-outer {
border-color: #eeeeee;
border-width: 0 1px 1px;
}
.mobile .date-outer:last-child {
margin-bottom: 0;
}
.mobile .main-inner {
padding: 0;
}
.mobile .header-inner .section {
margin: 0;
}
.mobile .post-outer, .mobile .inline-ad {
padding: 5px 0;
}
.mobile .tabs-inner .section {
margin: 0 10px;
}
.mobile .main-inner .widget h2 {
margin: 0;
padding: 0;
}
.mobile .main-inner .widget h2.date-header span {
padding: 0;
}
.mobile .main-inner .widget .widget-content {
margin: 0;
padding: 7px 0 0;
}
.mobile #blog-pager {
border: 1px solid transparent;
background: #ffffff none repeat scroll 0 0;
}
.mobile .main-inner .column-left-inner,
.mobile .main-inner .column-right-inner {
background: transparent none repeat 0 0;
-moz-box-shadow: none;
-webkit-box-shadow: none;
-goog-ms-box-shadow: none;
box-shadow: none;
}
.mobile .date-posts {
margin: 0;
padding: 0;
}
.mobile .footer-fauxborder-left {
margin: 0;
border-top: inherit;
}
.mobile .main-inner .section:last-child .Blog:last-child {
margin-bottom: 0;
}
.mobile-index-contents {
color: #444444;
}
.mobile .mobile-link-button {
background: #3778cd url(//www.blogblog.com/1kt/awesomeinc/tabs_gradient_light.png) repeat scroll 0 0;
}
.mobile-link-button a:link, .mobile-link-button a:visited {
color: #ffffff;
}
.mobile .tabs-inner .PageList .widget-content {
background: transparent;
border-top: 1px solid;
border-color: #999999;
color: #444444;
}
.mobile .tabs-inner .PageList .widget-content .pagelist-arrow {
border-left: 1px solid #999999;
}

--></style>
<style id="template-skin-1" type="text/css"><!--
body {
min-width: 1060px;
}
.content-outer, .content-fauxcolumn-outer, .region-inner {
min-width: 1060px;
max-width: 1060px;
_width: 1060px;
}
.main-inner .columns {
padding-left: 0;
padding-right: 240px;
}
.main-inner .fauxcolumn-center-outer {
left: 0;
right: 240px;
/* IE6 does not respect left and right together */
_width: expression(this.parentNode.offsetWidth -
parseInt("0") -
parseInt("240px") + 'px');
}
.main-inner .fauxcolumn-left-outer {
width: 0;
}
.main-inner .fauxcolumn-right-outer {
width: 240px;
}
.main-inner .column-left-outer {
width: 0;
right: 100%;
margin-left: -0;
}
.main-inner .column-right-outer {
width: 240px;
margin-right: -240px;
}
#layout {
min-width: 0;
}
#layout .content-outer {
min-width: 0;
width: 800px;
}
#layout .region-inner {
min-width: 0;
width: auto;
}
body#layout div.add_widget {
padding: 8px;
}
body#layout div.add_widget a {
margin-left: 32px;
}
--></style>
<link href="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/authorization.css" media="all" onload="if(media!=&#39;all&#39;)media=&#39;all&#39;" rel="stylesheet"><noscript><link href='https://www.blogger.com/dyn-css/authorization.css?targetBlogID=1304066656993695443&amp;zx=5725f5ec-addd-4156-898e-efd3ba4917c0' rel='stylesheet'/></noscript>

<script src="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/cb=gapi.loaded_3" async=""></script><script src="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/cb=gapi.loaded_2" async=""></script><script type="text/javascript" src="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/f.txt"></script><style>.gc-bubbleDefault{background-color:transparent !important;text-align:left;padding:0 !important;margin:0 !important;border:0 !important;table-layout:auto !important}.gc-reset{background-color:transparent !important;border:0 !important;padding:0 !important;margin:0 !important;text-align:left}.pls-bubbleTop{border-bottom:1px solid #ccc !important}.pls-topTail,.pls-vertShimLeft,.pls-contentLeft{background-image:url(//ssl.gstatic.com/s2/oz/images/stars/po/bubblev1/border_3.gif) !important}.pls-topTail{background-repeat:repeat-x !important;background-position:bottom !important}.pls-vertShim{background-color:#fff !important;text-align:right}.tbl-grey .pls-vertShim{background-color:#f5f5f5 !important}.pls-vertShimLeft{background-repeat:repeat-y !important;background-position:right !important;height:4px}.pls-vertShimRight{height:4px}.pls-confirm-container .pls-vertShim{background-color:#fff3c2 !important}.pls-contentWrap{background-color:#fff !important;position:relative !important;vertical-align:top}.pls-contentLeft{background-repeat:repeat-y;background-position:right;vertical-align:top}.pls-dropRight{background-image:url(//ssl.gstatic.com/s2/oz/images/stars/po/bubblev1/bubbleDropR_3.png) !important;background-repeat:repeat-y !important;vertical-align:top}.pls-vert,.pls-tailleft,.pls-dropTR .pls-dropBR,.pls-dropBL,.pls-vert img{vertical-align:top}.pls-dropBottom{background-image:url(//ssl.gstatic.com/s2/oz/images/stars/po/bubblev1/bubbleDropB_3.png) !important;background-repeat:repeat-x !important;width:100%;vertical-align:top}.pls-topLeft{background:inherit !important;text-align:right;vertical-align:bottom}.pls-topRight{background:inherit !important;text-align:left;vertical-align:bottom}.pls-bottomLeft{background:inherit !important;text-align:right}.pls-bottomRight{background:inherit !important;text-align:left;vertical-align:top}.pls-tailtop,.pls-tailright,.pls-tailbottom,.pls-tailleft{display:none;position:relative}.pls-tailbottom,.pls-tailtop,.pls-tailright,.pls-tailleft,.pls-dropTR,.pls-dropBR,.pls-dropBL{background-image:url(//ssl.gstatic.com/s2/oz/images/stars/po/bubblev1/bubbleSprite_3.png) !important;background-repeat:no-repeat}.tbl-grey .pls-tailbottom,.tbl-grey .pls-tailtop,.tbl-grey .pls-tailright,.tbl-grey .pls-tailleft,.tbl-grey .pls-dropTR,.tbl-grey .pls-dropBR,.tbl-grey .pls-dropBL{background-image:url(//ssl.gstatic.com/s2/oz/images/stars/po/bubblev1/bubbleSprite-grey.png) !important}.pls-tailbottom{background-position:-23px 0}.pls-confirm-container .pls-tailbottom{background-position:-23px -10px}.pls-tailtop{background-position:-19px -20px}.pls-tailright{background-position:0 0}.pls-tailleft{background-position:-10px 0}.pls-tailtop{vertical-align:top}.gc-bubbleDefault td{line-height:0;font-size:0}.pls-topLeft img,.pls-topRight img,.pls-tailbottom{vertical-align:bottom}.pls-bottomLeft img,.bubbleDropTR,.pls-dropBottomL img,.pls-dropBottom img,.pls-dropBottomR img,.pls-bottomLeft{vertical-align:top}.pls-dropTR{background-position:0 -22px}.pls-dropBR{background-position:0 -27px}.pls-dropBL{background-position:0 -16px}.pls-spacertop,.pls-spacerright,.pls-spacerbottom,.pls-spacerleft{position:static !important}.pls-spinner{bottom:0;position:absolute;left:0;margin:auto;right:0;top:0} </style><script async="" src="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/lazy.min.js"></script><link type="text/css" rel="stylesheet" charset="UTF-8" href="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/translateelement.css"></head>
<body class=" variant-light" data-gr-c-s-loaded="true" cz-shortcut-listen="true">
<div class="navbar section" id="navbar" name="Navbar"><div class="widget Navbar" data-version="1" id="Navbar1"><script src="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/cb=gapi(2).loaded_1" async=""></script><script src="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/cb=gapi(1).loaded_0" async=""></script><script type="text/javascript">
    function setAttributeOnload(object, attribute, val) {
      if(window.addEventListener) {
        window.addEventListener('load',
          function(){ object[attribute] = val; }, false);
      } else {
        window.attachEvent('onload', function(){ object[attribute] = val; });
      }
    }
  </script>
<div id="navbar-iframe-container"><iframe ng-non-bindable="" frameborder="0" hspace="0" marginheight="0" marginwidth="0" scrolling="no" style="" tabindex="0" vspace="0" width="100%" id="navbar-iframe" name="navbar-iframe" src="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/navbar.html"></iframe></div>
<script type="text/javascript" src="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/plusone.js" gapi_processed="true"></script>
<script type="text/javascript">
      gapi.load("gapi.iframes:gapi.iframes.style.bubble", function() {
        if (gapi.iframes && gapi.iframes.getContext) {
          gapi.iframes.getContext().openChild({
              url: 'https://www.blogger.com/navbar.g?targetBlogID\x3d1304066656993695443\x26blogName\x3dPaul+Done\x27s+Technical+Blog\x26publishMode\x3dPUBLISH_MODE_BLOGSPOT\x26navbarType\x3dLIGHT\x26layoutType\x3dLAYOUTS\x26searchRoot\x3dhttps://pauldone.blogspot.com/search\x26blogLocale\x3den\x26v\x3d2\x26homepageUrl\x3dhttp://pauldone.blogspot.com/\x26targetPostID\x3d1589304614399617387\x26blogPostOrPageUrl\x3dhttp://pauldone.blogspot.com/2017/07/sharded-mongodb-kubernetes.html\x26vt\x3d-6401847892151841713',
              where: document.getElementById("navbar-iframe-container"),
              id: "navbar-iframe"
          });
        }
      });
    </script><script type="text/javascript">
(function() {
var script = document.createElement('script');
script.type = 'text/javascript';
script.src = '//pagead2.googlesyndication.com/pagead/js/google_top_exp.js';
var head = document.getElementsByTagName('head')[0];
if (head) {
head.appendChild(script);
}})();
</script>
</div></div>
<div class="body-fauxcolumns">
<div class="fauxcolumn-outer body-fauxcolumn-outer">
<div class="cap-top">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
<div class="fauxborder-left">
<div class="fauxborder-right"></div>
<div class="fauxcolumn-inner">
</div>
</div>
<div class="cap-bottom">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
</div>
</div>
<div class="content">
<div class="content-fauxcolumns">
<div class="fauxcolumn-outer content-fauxcolumn-outer">
<div class="cap-top">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
<div class="fauxborder-left">
<div class="fauxborder-right"></div>
<div class="fauxcolumn-inner">
</div>
</div>
<div class="cap-bottom">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
</div>
</div>
<div class="content-outer">
<div class="content-cap-top cap-top">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
<div class="fauxborder-left content-fauxborder-left">
<div class="fauxborder-right content-fauxborder-right"></div>
<div class="content-inner">
<header>
<div class="header-outer">
<div class="header-cap-top cap-top">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
<div class="fauxborder-left header-fauxborder-left">
<div class="fauxborder-right header-fauxborder-right"></div>
<div class="region-inner header-inner">
<div class="header section" id="header" name="Header"><div class="widget Header" data-version="1" id="Header1">
<div id="header-inner">
<div class="titlewrapper">
<h1 class="title">
<a href="http://pauldone.blogspot.com/">
Paul Done's Technical Blog
</a>
</h1>
</div>
<div class="descriptionwrapper">
<p class="description"><span>A blog about enterprise software development and deployment</span></p>
</div>
</div>
</div></div>
</div>
</div>
<div class="header-cap-bottom cap-bottom">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
</div>
</header>
<div class="tabs-outer">
<div class="tabs-cap-top cap-top">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
<div class="fauxborder-left tabs-fauxborder-left">
<div class="fauxborder-right tabs-fauxborder-right"></div>
<div class="region-inner tabs-inner">
<div class="tabs no-items section" id="crosscol" name="Cross-Column"></div>
<div class="tabs no-items section" id="crosscol-overflow" name="Cross-Column 2"></div>
</div>
</div>
<div class="tabs-cap-bottom cap-bottom">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
</div>
<div class="main-outer">
<div class="main-cap-top cap-top">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
<div class="fauxborder-left main-fauxborder-left">
<div class="fauxborder-right main-fauxborder-right"></div>
<div class="region-inner main-inner">
<div class="columns fauxcolumns">
<div class="fauxcolumn-outer fauxcolumn-center-outer">
<div class="cap-top">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
<div class="fauxborder-left">
<div class="fauxborder-right"></div>
<div class="fauxcolumn-inner">
</div>
</div>
<div class="cap-bottom">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
</div>
<div class="fauxcolumn-outer fauxcolumn-left-outer">
<div class="cap-top">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
<div class="fauxborder-left">
<div class="fauxborder-right"></div>
<div class="fauxcolumn-inner">
</div>
</div>
<div class="cap-bottom">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
</div>
<div class="fauxcolumn-outer fauxcolumn-right-outer">
<div class="cap-top">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
<div class="fauxborder-left">
<div class="fauxborder-right"></div>
<div class="fauxcolumn-inner">
</div>
</div>
<div class="cap-bottom">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
</div>
<!-- corrects IE6 width calculation -->
<div class="columns-inner">
<div class="column-center-outer">
<div class="column-center-inner">
<div class="main section" id="main" name="Main"><div class="widget Blog" data-version="1" id="Blog1">
<div class="blog-posts hfeed">

          <div class="date-outer">
        
<h2 class="date-header"><span>Thursday, July 13, 2017</span></h2>

          <div class="date-posts">
        
<div class="post-outer">
<div class="post hentry uncustomized-post-template" itemprop="blogPost" itemscope="itemscope" itemtype="http://schema.org/BlogPosting">
<meta content="https://4.bp.blogspot.com/-rxa7MdqxlrQ/WWtjlq7cwmI/AAAAAAAAAjk/dHEcDHy2AyoyUV7y0YXQ1Ia18leTCZTTwCLcBGAs/s640/k1.png" itemprop="image_url">
<meta content="1304066656993695443" itemprop="blogId">
<meta content="1589304614399617387" itemprop="postId">
<a name="1589304614399617387"></a>
<h3 class="post-title entry-title" itemprop="name">
Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE
</h3>
<div class="post-header">
<div class="post-header-line-1"></div>
</div>
<div class="post-body entry-content" id="post-body-1589304614399617387" itemprop="description articleBody">
<i>[Part 4 in a series of posts about running MongoDB on Kubernetes, with the Google&nbsp;</i><i>Kubernetes</i><i>&nbsp;Engine (GKE). For this post, a <b>newer</b> GitHub project <a href="https://github.com/pkdone/gke-mongodb-shards-demo">gke-mongodb-shards-demo</a>&nbsp;has been created to provide an example of a scripted deployment for a Sharded cluster specifically. This gke-mongodb-shards-demo project also incorporates the conclusions from the earlier posts in the series. Also see:&nbsp;<a href="http://k8smongodb.net/">http://k8smongodb.net/</a>]</i><br>
<br>
<br>
<h2>
<span style="font-size: x-large;">Introduction</span></h2>
In the previous posts of my blog series (<a href="http://pauldone.blogspot.co.uk/2017/06/deploying-mongodb-on-kubernetes-gke25.html">1</a>, <a href="http://pauldone.blogspot.co.uk/2017/06/mongodb-kubernetes-production-settings.html">2</a>, <a href="http://pauldone.blogspot.co.uk/2017/06/enterprise-mongodb-on-kubernetes.html">3</a>), I focused on deploying a MongoDB Replica Set in GKE's Kubernetes environment. A MongoDB <a href="https://docs.mongodb.com/manual/replication/">Replica Set</a> provides data redundancy and high availability, and is the basic building block for any mission critical deployment of MongoDB. In this post, I now focus on the deployment of a MongoDB Sharded Cluster, within the GKE Kubernetes environment. A <a href="https://docs.mongodb.com/manual/sharding/">Sharded Cluster</a> enables the database to be scaled out over time, to meet increasing throughput and data volume demands. Even for a Sharded Cluster, the recommendations from my previous posts are still applicable. This is because each Shard is a Replica Set, to ensure that the deployment exhibits high availability, in addition to scalability.<br>
<br>
<br>
<h2>
<span style="font-size: x-large;">Deployment Process</span></h2>
My <a href="http://pauldone.blogspot.co.uk/2017/06/deploying-mongodb-on-kubernetes-gke25.html">first blog post</a>&nbsp;on MongoDB &amp; Kubernetes observed that, although Kubernetes is a powerful tool for provisioning and orchestrating sets of related containers (both stateless and now stateful), it is not a solution that caters for every required type of orchestration task. These tasks are invariably technology specific and need to operate below or above the “containers layer”. The example I gave in my <a href="http://pauldone.blogspot.co.uk/2017/06/deploying-mongodb-on-kubernetes-gke25.html">first&nbsp;post</a>, concerning the correct management of a MongoDB Replica Set's configuration, clearly demonstrates this point.<br>
<br>
In the modern&nbsp;<a href="https://en.wikipedia.org/wiki/Infrastructure_as_Code">Infrastructure as Code</a> paradigm, before orchestrating containers using something like Kubernetes, other tools are first required to provision infrastructure/<a href="https://en.wikipedia.org/wiki/Cloud_computing#Infrastructure_as_a_service_.28IaaS.29">IaaS</a> artefacts such as Compute, Storage and Networking. You can see a clear example of this in the <a href="https://github.com/pkdone/gke-mongodb-demo/blob/master/scripts/generate.sh">provisioning script used in my first post</a>, showing non-Kubernetes commands ("<i>gcloud</i>"), which are specific to the Google's Compute Platform (GCP), being used first, to provision storage disks. Once containers have been provisioned by a tool like Kubernetes, higher level configuration tasks, such as data loading, system user identity provisioning, secure network modification for service exposure and many other "final bootstrap" tasks, will also often need to be scripted.<br>
<br>
With the requirement here to deploy a MongoDB Sharded Cluster, the distinction between container orchestration tasks, lower level infrastructure/IaaS provisioning tasks and higher level technology-specific orchestration tasks, becomes even more apparent...<br>
<br>
For a MongoDB Sharded Cluster on GKE, the following categories of tasks must be implemented:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;<b>Infrastructure Level &nbsp;</b>(using Google's "<b>gcloud</b>" tool)<br>
<ol>
<li>Create 3 VM instances</li>
<li>Create storage disks of various sizes, for containers to attach to</li>
</ol>
&nbsp;&nbsp;&nbsp;&nbsp;<b>Container Level&nbsp;</b>&nbsp;(using Kubernetes' "<b>kubectl</b>" tool)<br>
<ol>
<li>Provision 3 "<a href="https://github.com/kubernetes/contrib/tree/master/startup-script">startup-script</a>" containers using a Kubernetes <a href="https://kubernetes.io/docs/concepts/workloads/controllers/daemonset/">DaemonSet</a>, to enable the XFS filesystem to be used and to disable&nbsp;<a href="https://docs.mongodb.com/manual/tutorial/transparent-huge-pages/">Huge Pages</a></li>
<li>Provision 3 "mongod" containers using a Kubernetes <a href="https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/">StatefulSet</a>, ready to be used as members of the&nbsp;<a href="https://docs.mongodb.com/manual/core/sharded-cluster-config-servers/">Config Server Replica Set</a>&nbsp;to host the <a href="https://docs.mongodb.com/manual/reference/config-database/">ConfigDB</a></li>
<li>Provision 3 separate Kubernetes <a href="https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/">StatefulSets</a>, one per Shard, where each StatefulSet is composed of 3 "mongod" containers ready to be used as members of the Shard's Replica Set</li>
<li>Provision 2 "mongos" containers using a Kubernetes <a href="https://kubernetes.io/docs/concepts/workloads/controllers/deployment/">Deployment</a>, ready to be used for managing and routing client access to the Sharded database</li>
</ol>
&nbsp; &nbsp;&nbsp;<b>Database Level</b> &nbsp;(using MongoDB's "<b>mongo shell</b>" tool)<br>
<ol>
<li>For the Config Servers, run the <a href="https://docs.mongodb.com/manual/reference/method/rs.initiate/">initialisation command to form a Replica Set</a></li>
<li>For each of the 3 Shards (composed of 3 mongod processes), run the&nbsp;<a href="https://docs.mongodb.com/manual/reference/method/rs.initiate/">initialisation command to form a Replica Set</a></li>
<li>Connecting to one of the Mongos instances, run the <a href="https://docs.mongodb.com/manual/reference/method/sh.addShard/">addShard command</a>,&nbsp;3 times, once for each of the Shards, to enable the Sharded Cluster to be fully assembled</li>
<li>Connecting to one&nbsp;of the Mongos instances, under&nbsp;<a href="https://docs.mongodb.com/manual/core/security-users/#localhost-exception">localhost exception</a>&nbsp;conditions, create a database administrator user to apply to the cluster as a whole</li>
</ol>
<br>
The quantities of resources highlighted above are specific to my example deployment, but the types and order of provisioning steps apply regardless of deployment size.<br>
<br>
In the accompanying&nbsp;<a href="https://github.com/pkdone/gke-mongodb-shards-demo">example project</a>, for brevity and clarity, I use a <a href="https://github.com/pkdone/gke-mongodb-shards-demo/blob/master/scripts/generate.sh">simple Bash shell script</a> to wire together these three different categories of tasks. In reality, most organisations would use more specialised automation software, such as <a href="https://en.wikipedia.org/wiki/Ansible_(software)">Ansible</a>, <a href="https://en.wikipedia.org/wiki/Puppet_(software)">Puppet</a>, or&nbsp;<a href="https://en.wikipedia.org/wiki/Chef_(software)">Chef</a>,&nbsp;for example, to glue all such steps together.<br>
<br>
<br>
<h2>
<span style="font-size: x-large;">Kubernetes Controllers &amp; Pods</span></h2>
The Kubernetes StatefulSet definitions for the MongoDB Config Server "mongod" containers and the Shard member "mongod" containers hardly differ from those described in my&nbsp;<a href="http://pauldone.blogspot.co.uk/2017/06/deploying-mongodb-on-kubernetes-gke25.html">first blog post</a>.<br>
<br>
Below is an excerpt of the StatefulSet definition for each&nbsp;<b>Config Server mongod container</b> (shard specific addition highlighted in bold):<br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"><br></span>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">containers:</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; - name: mongod-configdb-container</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; image: mongo</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; command:</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; - "mongod"</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; - "--port"</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; - "27017"</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; - "--bind_ip"</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; - "0.0.0.0"</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; - "--wiredTigerCacheSizeGB"</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; - "0.25"</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"><b>&nbsp; &nbsp; &nbsp; - "--configsvr"</b></span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; - "--replSet"</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; - "ConfigDBRepSet"</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; - "--auth"</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; - "--clusterAuthMode"</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; - "keyFile"</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; - "--keyFile"</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; - "/etc/secrets-volume/internal-auth-mongodb-keyfile"</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; - "--setParameter"</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; - "authenticationMechanisms=SCRAM-SHA-1"</span><br>
<br>
Below is an excerpt of the StatefulSet definition for each&nbsp;<b>Shard member mongod container</b>&nbsp;(shard specific addition highlighted in bold):<br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"><br></span>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">containers:</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; - name: mongod-shard1-container</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; image: mongo</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; command:</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; - "mongod"</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; - "--port"</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; - "27017"</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; - "--bind_ip"</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; - "0.0.0.0"</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; - "--wiredTigerCacheSizeGB"</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; - "0.25"</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"><b>&nbsp; &nbsp; &nbsp; - "--shardsvr"</b></span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; - "--replSet"</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; - "Shard1RepSet"</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; - "--auth"</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; - "--clusterAuthMode"</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; - "keyFile"</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; - "--keyFile"</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; - "/etc/secrets-volume/internal-auth-mongodb-keyfile"</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; - "--setParameter"</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; - "authenticationMechanisms=SCRAM-SHA-1"</span><br>
<br>
For the Shard's container definition, the name of the specific Shard's Replica Set is declared. This Shard definition will result in 3 mongod replica containers being created for the Shard Replica Set, called "Shard1RepSet". Two additional and similar StatefulSet resources also have to be defined, to represent the second Shard ("Shard2RepSet") and third Shard ("Shard3RepSet") too.<br>
<br>
To provision the Mongos Routers, a StatefulSet is not used. This is because neither persistent storage nor a fixed network hostname are required. Mongos Routers are stateless and, to a degree, ephemeral. Instead, a Kubernetes <a href="https://kubernetes.io/docs/concepts/workloads/controllers/deployment/">Deployment</a> resource is defined, which is the Kubernetes preferred approach for stateless services. Below is the Deployment definition for the <b>Router mongos container</b>:<br>
<br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">apiVersion: apps/v1beta1</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">kind: Deployment</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">metadata:</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; name: mongos</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">spec:</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; replicas: <b>2</b></span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; template:</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; spec:</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; volumes:</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; &nbsp; - name: secrets-volume</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; secret:</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; secretName: shared-bootstrap-data</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; defaultMode: 256</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; containers:</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; &nbsp; - name: mongos-container</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; image: <b>mongo</b></span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; command:</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; - "numactl"</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; - "--interleave=all"</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; - "<b>mongos</b>"</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; - "--port"</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; - "27017"</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; - "--bind_ip"</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; - "0.0.0.0"</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; - "<b>--configdb</b>"</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; - "<b>ConfigDBRepSet/mongod-configdb-0.mongodb-configdb-service.default.svc.cluster.local:27017,mongod-configdb-1.mongodb-configdb-service.default.svc.cluster.local:27017,mongod-configdb-2.mongodb-configdb-service.default.svc.cluster.local:27017</b>"</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; - "--clusterAuthMode"</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; - "keyFile"</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; - "--keyFile"</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; - "/etc/secrets-volume/internal-auth-mongodb-keyfile"</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; - "--setParameter"</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; - "authenticationMechanisms=SCRAM-SHA-1"</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ports:</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; - containerPort: 27017</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; volumeMounts:</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; - name: secrets-volume</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; readOnly: true</span><br>
<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mountPath: /etc/secrets-volume</span><br>
<div>
<br></div>
The actual structure of this resource definition is not a radical departure from the definition of a StatefulSet. A different command has been declared ("mongos", rather than "mongod"), but the same base container image has been referenced (<a href="https://hub.docker.com/_/mongo/">mongo image from Docker Hub</a>). For the "mongos" container, it is still important to enable authentication and to reference the generated cluster key file. Specific to the "mongos" parameter list is "<i>--configdb</i>", to specify the URL of the "ConfigDB" (the 3-node Config Server Replica Set). This URL will be connected to by each instance of the mongos router, to enable discovery of the Shards in the cluster and to determine which Shard holds specific ranges of the stored data. Due to the fact that the "mongod" containers, used to host the "ConfigDB", are deployed as a StatefulSet, their hostnames remain constant. As a result, a fixed URL can be defined in the "mongos" container resource definition, as shown above.<br>
<br>
Once the &nbsp;<a href="https://github.com/pkdone/gke-mongodb-shards-demo/blob/master/scripts/generate.sh">"generate" shell script</a>&nbsp;in the&nbsp;<a href="https://github.com/pkdone/gke-mongodb-shards-demo">example project</a>&nbsp;has been executed, and all the Infrastructure, Kubernetes and Database provisioning steps have successfully completed, 17 different <a href="https://kubernetes.io/docs/concepts/workloads/pods/pod/">Pods</a> will be running, each hosting one container. Below is a screenshot showing the results from running the "kubectl" command, to list all the running Kubernetes Pods:<br>
<div class="separator" style="clear: both; text-align: center;">
<a href="https://4.bp.blogspot.com/-rxa7MdqxlrQ/WWtjlq7cwmI/AAAAAAAAAjk/dHEcDHy2AyoyUV7y0YXQ1Ia18leTCZTTwCLcBGAs/s1600/k1.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="827" data-original-width="1263" height="418" src="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/k1.png" width="640"></a></div>
This tallies up with what Kubernetes was asked to be deployed, namely:<br>
<ul>
<li>3x DaemonSet startup-script containers (one per host machine)</li>
<li>3x Config Server mongod containers</li>
<li>3x Shards, each composed of 3 replica mongod containers</li>
<li>2x Router mongos containers</li>
</ul>
Only the "mongod" containers for the Config Servers and the Shard Replicas have fixed and deterministic names, because these were deployed as Kubernetes StatefulSets. The names of the other containers reflect the fact that they are regarded as stateless, disposable and trivial to re-create, on-demand, by Kubernetes.<br>
<br>
With the full deployment generated and running, it is a straight forward process to connect to the sharded cluster to check its status. The screenshot below shows the use of the "kubectl" command to open a Bash shell connected to the first "mongos" container. From the Bash shell, the "mongo shell" has been opened, connecting to the local "mongos" process running in the same container. &nbsp;Before the command to view the status of the Sharded cluster has been run, the database has first been authenticated with, using the "admin" user.<br>
<div class="separator" style="clear: both; text-align: center;">
<a href="https://2.bp.blogspot.com/--tbFi9u8Lgc/WWtjw2dXU_I/AAAAAAAAAjo/emGEAdJGNgU1OWSgAuOqhmaWO17QzPEAgCLcBGAs/s1600/k2.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="992" data-original-width="1600" height="396" src="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/k2.png" width="640"></a></div>
<div class="separator" style="clear: both; text-align: center;">
</div>
The output of the status command shows that the URLs of all three Shards that have been defined (each is a MongoDB Replica Set). Again, these URLs remain fixed by virtue of the use of Kubernetes StatefulSets for the "mongod" containers that compose each Shard.<br>
<br>
<b style="background-color: white; color: #444444; font-family: Arial, Tahoma, Helvetica, FreeSans, sans-serif; font-size: 13px;">UPDATE 02-Jan-2018:&nbsp;</b><i style="background-color: white;"><span style="color: #444444; font-family: &quot;arial&quot; , &quot;tahoma&quot; , &quot;helvetica&quot; , &quot;freesans&quot; , sans-serif;"><span style="font-size: 13px;">Since writing this blog post, I realised that because the mongos routers ideally require stable hostnames, to be easily referenceable&nbsp;from the app tier, the mongos router containers should also be declared and deployed as a Kubernetes StatefulSet and Service, rather than a Kubernetes Deployment. The&nbsp;</span></span></i><span style="color: #444444; font-family: &quot;arial&quot; , &quot;tahoma&quot; , &quot;helvetica&quot; , &quot;freesans&quot; , sans-serif;"><span style="font-size: 13px;"><i>GitHub project <a href="https://github.com/pkdone/gke-mongodb-shards-demo">gke-mongodb-shards-demo</a>, associated with this blog post, has been changed to reflect this.</i></span></span><br>
<h2>
<span style="font-size: x-large;"><br></span></h2>
<h2>
<span style="font-size: x-large;">Summary</span></h2>
In this blog post I’ve shown how to deploy a MongoDB Sharded Cluster using Kubernetes with the Google Kubernetes&nbsp;Engine. I've mainly focused on the high level considerations for such deployments, rather than listing every specific resource and step required (for that level of detail, please view the&nbsp;<a href="https://github.com/pkdone/gke-mongodb-shards-demo">accompanying GitHub project</a>). What this study does reinforce, is that a single container orchestration framework (Kubernetes in this case) does not cater for every step required to provision and deploy a highly available and scalable database, such as MongoDB. I believe that this would be true for any non-trivial and mission critical distributed application or set of services. However, I don't see this is a bad thing. Personally, I value flexibility and choice, and having the ability to use the right tool for the right job. In my opinion, a container orchestration framework that tries to cater for things beyond its obvious remit would be the wrong framework. A framework that attempts to be all things to all people, would end up diluting its own value, down to the lowest common denominator. At the very least, it would become far too prescriptive and restrictive. I feel that Kubernetes, in its current state, strikes a suitable and measured balance, and with its StatefulSets capability, provides a good home for MongoDB deployments.<br>
<br>
<br>
<i>Song for today: Three Days by <a href="https://en.wikipedia.org/wiki/Jane%27s_Addiction">Jane's&nbsp;Addiction</a></i><br>
<br>
<div style="clear: both;"></div>
</div>
<div class="post-footer">
<div class="post-footer-line post-footer-line-1">
<span class="post-author vcard">
Posted by
<span class="fn" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person">
<meta content="https://www.blogger.com/profile/09556312012162376804" itemprop="url">
<a class="g-profile" href="https://www.blogger.com/profile/09556312012162376804" rel="author" title="author profile" data-gapiscan="true" data-onload="true" data-gapiattached="true">
<span itemprop="name">Paul Done</span>
</a>
</span>
</span>
<span class="post-timestamp">
</span>
<span class="reaction-buttons">
</span>
<span class="post-comment-link">
</span>
<span class="post-backlinks post-comment-link">
</span>
<span class="post-icons">
<span class="item-control blog-admin pid-130575365">
<a href="https://www.blogger.com/post-edit.g?blogID=1304066656993695443&amp;postID=1589304614399617387&amp;from=pencil" title="Edit Post">
<img alt="" class="icon-action" height="18" src="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/icon18_edit_allbkg.gif" width="18">
</a>
</span>
</span>
<div class="post-share-buttons goog-inline-block">
<a class="goog-inline-block share-button sb-email" href="https://www.blogger.com/share-post.g?blogID=1304066656993695443&amp;postID=1589304614399617387&amp;target=email" target="_blank" title="Email This"><span class="share-button-link-text">Email This</span></a><a class="goog-inline-block share-button sb-blog" href="https://www.blogger.com/share-post.g?blogID=1304066656993695443&amp;postID=1589304614399617387&amp;target=blog" onclick="window.open(this.href, &quot;_blank&quot;, &quot;height=270,width=475&quot;); return false;" target="_blank" title="BlogThis!"><span class="share-button-link-text">BlogThis!</span></a><a class="goog-inline-block share-button sb-twitter" href="https://www.blogger.com/share-post.g?blogID=1304066656993695443&amp;postID=1589304614399617387&amp;target=twitter" target="_blank" title="Share to Twitter"><span class="share-button-link-text">Share to Twitter</span></a><a class="goog-inline-block share-button sb-facebook" href="https://www.blogger.com/share-post.g?blogID=1304066656993695443&amp;postID=1589304614399617387&amp;target=facebook" onclick="window.open(this.href, &quot;_blank&quot;, &quot;height=430,width=640&quot;); return false;" target="_blank" title="Share to Facebook"><span class="share-button-link-text">Share to Facebook</span></a><a class="goog-inline-block share-button sb-pinterest" href="https://www.blogger.com/share-post.g?blogID=1304066656993695443&amp;postID=1589304614399617387&amp;target=pinterest" target="_blank" title="Share to Pinterest"><span class="share-button-link-text">Share to Pinterest</span></a>
</div>
</div>
<div class="post-footer-line post-footer-line-2">
<span class="post-labels">
</span>
</div>
<div class="post-footer-line post-footer-line-3">
<span class="post-location">
</span>
</div>
</div>
</div>
<div class="comments" id="comments">
<a name="comments"></a>
<h4>11 comments:</h4>
<div id="Blog1_comments-block-wrapper">
<dl class="avatar-comment-indent" id="comments-block">
<dt class="comment-author " id="c6004609169152968445">
<a name="c6004609169152968445"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/09913588288401963768" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-6004609169152968445-09913588288401963768"><img src="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/unnamed.png" width="35" height="35" alt="" title="Unknown">

</a></span></div>
<a href="https://www.blogger.com/profile/09913588288401963768" rel="nofollow">Unknown</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-6004609169152968445">
<p>
Hi, this is great work! As a suggestion, I think it would be great to have an analysis of different failure scenarios and how to handle it on a sharded deployment on kubernetes... For instance, what happens if a node in the cluster simply disappear? How to recover from that? There are many others scenarios and I think it would be great to have such analysis!
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="http://pauldone.blogspot.com/2017/07/sharded-mongodb-kubernetes.html?showComment=1512838359817#c6004609169152968445" title="comment permalink">
December 9, 2017 at 4:52 PM
</a>
<span class="item-control blog-admin pid-1899280105">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=1304066656993695443&amp;postID=6004609169152968445" title="Delete Comment">
<img src="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c4471424049717412630">
<a name="c4471424049717412630"></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="https://www.blogger.com/profile/14094449448458978864" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-4471424049717412630-14094449448458978864"><img src="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/photo(2).jpg" width="35" height="35" class="delayLoad" style="" longdesc="//lh5.googleusercontent.com/-Kl3bmHcvPHg/AAAAAAAAAAI/AAAAAAAAABo/bK31cSGpeq4/s35-c/photo.jpg" alt="" title="mathob jehanno">

<noscript><img src="//lh5.googleusercontent.com/-Kl3bmHcvPHg/AAAAAAAAAAI/AAAAAAAAABo/bK31cSGpeq4/s35-c/photo.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href="https://www.blogger.com/profile/14094449448458978864" rel="nofollow">mathob jehanno</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-4471424049717412630">
<p>
Hi, thanks for sharing your knowledge and experience on both kubernetes and mongodb.<br>I'm currently trying to set a mongo sharded cluster using a kubernetes cluster (as you did) but on bare-metal server. I tried to use a custom version of your script from your github project but I'm stuck on a very annoying problem : mongo services cannot reach each other ("connection refused"). kubernetes dns services and pods are running and the only log I get from kube-dns is "could not find endpoint for service 'mongodb-[service]'".Yet endpoints for thoses services are created.<br>Could you lend me a hand on this please ? 
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="http://pauldone.blogspot.com/2017/07/sharded-mongodb-kubernetes.html?showComment=1514456493133#c4471424049717412630" title="comment permalink">
December 28, 2017 at 10:21 AM
</a>
<span class="item-control blog-admin pid-366982362">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=1304066656993695443&amp;postID=4471424049717412630" title="Delete Comment">
<img src="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c3426214525287559802">
<a name="c3426214525287559802"></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="https://www.blogger.com/profile/12740684935580253255" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-3426214525287559802-12740684935580253255"><img src="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/photo(3).jpg" width="35" height="35" class="delayLoad" style="" longdesc="//lh6.googleusercontent.com/-qOmbsdbwiOM/AAAAAAAAAAI/AAAAAAAAAoo/uOzjDW1ZHs0/s35-c/photo.jpg" alt="" title="Lathesh Karkera">

<noscript><img src="//lh6.googleusercontent.com/-qOmbsdbwiOM/AAAAAAAAAAI/AAAAAAAAAoo/uOzjDW1ZHs0/s35-c/photo.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href="https://www.blogger.com/profile/12740684935580253255" rel="nofollow">Lathesh Karkera</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-3426214525287559802">
<p>
Hi Paul,<br><br>Thanks for the amazing tutorials.<br>Please share me the connection string for mongodb.
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="http://pauldone.blogspot.com/2017/07/sharded-mongodb-kubernetes.html?showComment=1514513980606#c3426214525287559802" title="comment permalink">
December 29, 2017 at 2:19 AM
</a>
<span class="item-control blog-admin pid-721523574">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=1304066656993695443&amp;postID=3426214525287559802" title="Delete Comment">
<img src="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author blog-author" id="c3478218898556368342">
<a name="c3478218898556368342"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/09556312012162376804" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-3478218898556368342-09556312012162376804"><img src="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/unnamed.png" width="35" height="35" alt="" title="Paul Done">

</a></span></div>
<a href="https://www.blogger.com/profile/09556312012162376804" rel="nofollow">Paul Done</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-3478218898556368342">
<p>
@"mathob jehanno", if you are using MongoDB version 3.6+ then due to the change in default behaviour of mongod binding and listening on localhost only, you need to set the bind_ip explicitly in the mongod start-up params. See "--bind_ip" example in https://github.com/pkdone/gke-mongodb-shards-demo/blob/master/resources/mongodb-maindb-service.yaml<br><br>Also this repo may be of interest: https://github.com/pkdone/mongo-multi-svr-generator
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="http://pauldone.blogspot.com/2017/07/sharded-mongodb-kubernetes.html?showComment=1514635988336#c3478218898556368342" title="comment permalink">
December 30, 2017 at 12:13 PM
</a>
<span class="item-control blog-admin pid-130575365">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=1304066656993695443&amp;postID=3478218898556368342" title="Delete Comment">
<img src="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c4769067872720310931">
<a name="c4769067872720310931"></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="https://www.blogger.com/profile/14094449448458978864" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-4769067872720310931-14094449448458978864"><img src="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/photo(4).jpg" width="35" height="35" class="delayLoad" style="" longdesc="//lh5.googleusercontent.com/-Kl3bmHcvPHg/AAAAAAAAAAI/AAAAAAAAAgE/tNktiMouZKs/s35-c/photo.jpg" alt="" title="mathob jehanno">

<noscript><img src="//lh5.googleusercontent.com/-Kl3bmHcvPHg/AAAAAAAAAAI/AAAAAAAAAgE/tNktiMouZKs/s35-c/photo.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href="https://www.blogger.com/profile/14094449448458978864" rel="nofollow">mathob jehanno</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-4769067872720310931">
<p>
@"Paul Done" Thanks for your answer, it helped me moving forward, yet I've another problem, I'll try to figure out myself. The link you provided will probably help me.
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="http://pauldone.blogspot.com/2017/07/sharded-mongodb-kubernetes.html?showComment=1514888016350#c4769067872720310931" title="comment permalink">
January 2, 2018 at 10:13 AM
</a>
<span class="item-control blog-admin pid-366982362">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=1304066656993695443&amp;postID=4769067872720310931" title="Delete Comment">
<img src="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author blog-author" id="c3847978157234999247">
<a name="c3847978157234999247"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/09556312012162376804" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-3847978157234999247-09556312012162376804"><img src="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/unnamed.png" width="35" height="35" alt="" title="Paul Done">

</a></span></div>
<a href="https://www.blogger.com/profile/09556312012162376804" rel="nofollow">Paul Done</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-3847978157234999247">
<p>
@"Lathesh Karkera", I just updated the blog post. See comment "UPDATE 02-Jan-2018" added to the above post with a description. Using the updated github project the hostnames/ports for the mongos routers that can be referenced in the connection url will be: "mongos-router-0.mongos-router-service.default.svc.cluster.local:27017" and "mongos-router-1.mongos-router-service.default.svc.cluster.local:27017". 
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="http://pauldone.blogspot.com/2017/07/sharded-mongodb-kubernetes.html?showComment=1514913524988#c3847978157234999247" title="comment permalink">
January 2, 2018 at 5:18 PM
</a>
<span class="item-control blog-admin pid-130575365">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=1304066656993695443&amp;postID=3847978157234999247" title="Delete Comment">
<img src="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c5232507447987894463">
<a name="c5232507447987894463"></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="https://www.blogger.com/profile/12740684935580253255" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-5232507447987894463-12740684935580253255"><img src="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/photo(3).jpg" width="35" height="35" class="delayLoad" style="" longdesc="//lh6.googleusercontent.com/-qOmbsdbwiOM/AAAAAAAAAAI/AAAAAAAAAoo/uOzjDW1ZHs0/s35-c/photo.jpg" alt="" title="Lathesh Karkera">

<noscript><img src="//lh6.googleusercontent.com/-qOmbsdbwiOM/AAAAAAAAAAI/AAAAAAAAAoo/uOzjDW1ZHs0/s35-c/photo.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href="https://www.blogger.com/profile/12740684935580253255" rel="nofollow">Lathesh Karkera</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-5232507447987894463">
<p>
Thank you so much Paul.<br>I want to deploy mongodb and mysql  as containers in GKE(Google Kubernetes Engine)<br><br>I succeeded in deploying in single cluster in same region. But requirement is to deploy in different region and have a data synchronization.<br><br>Example: Assume there are 2 regions us-central and us-east If customer does any operation on database it has to reflect on both the region at same time.<br><br>How I can implement this using kubernetes container engine?<br><br>What are all the Pros and Cons?
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="http://pauldone.blogspot.com/2017/07/sharded-mongodb-kubernetes.html?showComment=1515123980588#c5232507447987894463" title="comment permalink">
January 5, 2018 at 3:46 AM
</a>
<span class="item-control blog-admin pid-721523574">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=1304066656993695443&amp;postID=5232507447987894463" title="Delete Comment">
<img src="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c5724884286356455477">
<a name="c5724884286356455477"></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="https://www.blogger.com/profile/18170178869700570400" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-5724884286356455477-18170178869700570400"><img src="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/photo(5).jpg" width="35" height="35" class="delayLoad" style="" longdesc="//lh4.googleusercontent.com/-k-SlgRVZDjM/AAAAAAAAAAI/AAAAAAAAAC4/v-o4kKSHhB8/s35-c/photo.jpg" alt="" title="Paul Done">

<noscript><img src="//lh4.googleusercontent.com/-k-SlgRVZDjM/AAAAAAAAAAI/AAAAAAAAAC4/v-o4kKSHhB8/s35-c/photo.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href="https://www.blogger.com/profile/18170178869700570400" rel="nofollow">Paul Done</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-5724884286356455477">
<p>
Hi Lathesh, I've not looked at multi-dc / multi-regions options for k8s yet. I'll be interested to find out what you discover. Paul
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="http://pauldone.blogspot.com/2017/07/sharded-mongodb-kubernetes.html?showComment=1515245963894#c5724884286356455477" title="comment permalink">
January 6, 2018 at 1:39 PM
</a>
<span class="item-control blog-admin pid-1640258780">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=1304066656993695443&amp;postID=5724884286356455477" title="Delete Comment">
<img src="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c520797102549847574">
<a name="c520797102549847574"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/15874718683314873389" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-520797102549847574-15874718683314873389"><img src="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/unnamed.png" width="35" height="35" alt="" title="Matt Daniels">

</a></span></div>
<a href="https://www.blogger.com/profile/15874718683314873389" rel="nofollow">Matt Daniels</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-520797102549847574">
<p>
Hi Paul,<br><br>fantastic set of tutorials - so helpful to get a nicely distributed &amp; scalable deployment of MongoDB.<br><br>It is probably my misunderstanding of Kubernetes, but I want to expose this cross-cluster and externally (ie: to connect and explore the data from something like Compass from my desktop) but seem to be having difficulties. From what I can understand, the entry point will be the mongos router service, but how is this exposed to the big wide world... :)<br><br>Again, thanks for a great set of articles - still learning and these were just incredible for me to understand how it all comes together.<br><br>cheers, Matt
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="http://pauldone.blogspot.com/2017/07/sharded-mongodb-kubernetes.html?showComment=1518657406453#c520797102549847574" title="comment permalink">
February 15, 2018 at 1:16 AM
</a>
<span class="item-control blog-admin pid-1618187067">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=1304066656993695443&amp;postID=520797102549847574" title="Delete Comment">
<img src="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c1979267675610193667">
<a name="c1979267675610193667"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/09688508732196754919" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-1979267675610193667-09688508732196754919"><img src="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/unnamed.png" width="35" height="35" alt="" title="MJY">

</a></span></div>
<a href="https://www.blogger.com/profile/09688508732196754919" rel="nofollow">MJY</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-1979267675610193667">
<p>
Thanks for sharing this blog, it was very useful to get started with mongoDB in k8s.<br><br>On github repo : https://github.com/pkdone/gke-mongodb-shards-demo<br><br>one of the generate script might end up in infinite loop :<br>kubectl exec mongod-shard1-0 -c mongod-shard1-container -- mongo --quiet --eval 'while (rs.status().hasOwnProperty("myState") &amp;&amp; rs.status().myState != 1) { print("."); sleep(1000); };'<br><br>Here when rs.initiate() is done, any shard or config server can be primary ( myState value=1)or secondary (myState value=2). so how can we assure that mongod-shard1-0 with mystate != 1  if it's a primary shard?
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="http://pauldone.blogspot.com/2017/07/sharded-mongodb-kubernetes.html?showComment=1520024119161#c1979267675610193667" title="comment permalink">
March 2, 2018 at 8:55 PM
</a>
<span class="item-control blog-admin pid-995013137">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=1304066656993695443&amp;postID=1979267675610193667" title="Delete Comment">
<img src="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
<dt class="comment-author " id="c8398515093861354353">
<a name="c8398515093861354353"></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/10723554603707824203" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-8398515093861354353-10723554603707824203"><img src="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/unnamed.png" width="35" height="35" alt="" title="Dov Amir">

</a></span></div>
<a href="https://www.blogger.com/profile/10723554603707824203" rel="nofollow">Dov Amir</a>
said...
</dt>
<dd class="comment-body" id="Blog1_cmt-8398515093861354353">
<p>
I saw that you also did a tutorial on running  MongoDB Deployment Demo for Kubernetes on Azure ACS<br>https://github.com/pkdone/azure-acs-mongodb-demo<br><br>any chance of doing the same thing for runnning Sharded mongodb on AKS ?<br><br>thanks
</p>
</dd>
<dd class="comment-footer">
<span class="comment-timestamp">
<a href="http://pauldone.blogspot.com/2017/07/sharded-mongodb-kubernetes.html?showComment=1534781581279#c8398515093861354353" title="comment permalink">
August 20, 2018 at 5:13 PM
</a>
<span class="item-control blog-admin pid-1084763124">
<a class="comment-delete" href="https://www.blogger.com/delete-comment.g?blogID=1304066656993695443&amp;postID=8398515093861354353" title="Delete Comment">
<img src="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/icon_delete13.gif">
</a>
</span>
</span>
</dd>
</dl>
</div>
<p class="comment-footer">
<a href="https://www.blogger.com/comment.g?blogID=1304066656993695443&amp;postID=1589304614399617387" onclick="">Post a Comment</a>
</p>
<div id="backlinks-container">
<div id="Blog1_backlinks-container">
</div>
</div>
</div>
</div>

        </div></div>
      
</div>
<div class="blog-pager" id="blog-pager">
<span id="blog-pager-newer-link">
<a class="blog-pager-newer-link" href="http://pauldone.blogspot.com/2018/02/parallel-mongodb-aggregation-facets.html" id="Blog1_blog-pager-newer-link" title="Newer Post">Newer Post</a>
</span>
<span id="blog-pager-older-link">
<a class="blog-pager-older-link" href="http://pauldone.blogspot.com/2017/06/enterprise-mongodb-on-kubernetes.html" id="Blog1_blog-pager-older-link" title="Older Post">Older Post</a>
</span>
<a class="home-link" href="http://pauldone.blogspot.com/">Home</a>
</div>
<div class="clear"></div>
<div class="post-feeds">
<div class="feed-links">
Subscribe to:
<a class="feed-link" href="http://pauldone.blogspot.com/feeds/1589304614399617387/comments/default" target="_blank" type="application/atom+xml">Post Comments (Atom)</a>
</div>
</div>
</div></div>
</div>
</div>
<div class="column-left-outer">
<div class="column-left-inner">
<aside>
</aside>
</div>
</div>
<div class="column-right-outer">
<div class="column-right-inner">
<aside>
<div class="sidebar section" id="sidebar-right-1"><div class="widget Profile" data-version="1" id="Profile1">
<h2>About Me</h2>
<div class="widget-content">
<dl class="profile-datablock">
<dt class="profile-data">
<a class="profile-name-link g-profile" href="https://www.blogger.com/profile/09556312012162376804" rel="author" style="background-image: url(//www.blogger.com/img/logo-16.png);" data-gapiscan="true" data-onload="true" data-gapiattached="true">
Paul Done
</a>
</dt>
<dd class="profile-textblock">Exploring interests in programming, databases, middleware, enterprise messaging, transaction processing, virtualisation, containerisation, web services and highly distributed systems</dd>
</dl>
<a class="profile-link" href="https://www.blogger.com/profile/09556312012162376804" rel="author">View my complete profile</a>
<div class="clear"></div>
<span class="widget-item-control">
<span class="item-control blog-admin">
<a class="quickedit" href="http://www.blogger.com/rearrange?blogID=1304066656993695443&amp;widgetType=Profile&amp;widgetId=Profile1&amp;action=editWidget&amp;sectionId=sidebar-right-1" onclick="return _WidgetManager._PopupConfig(document.getElementById(&quot;Profile1&quot;));" rel="nofollow" target="configProfile1" title="Edit">
<img alt="" height="18" src="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/icon18_wrench_allbkg.png" width="18">
</a>
</span>
</span>
<div class="clear"></div>
</div>
</div><div class="widget Image" data-version="1" id="Image1">
<h2>Blog</h2>
<div class="widget-content">
<a href="http://pauldone.blogspot.com/">
<img alt="Blog" height="182" id="Image1_img" src="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/paul.jpeg" width="176" style="visibility: visible;">
</a>
<br>
</div>
<div class="clear"></div>
<span class="widget-item-control">
<span class="item-control blog-admin">
<a class="quickedit" href="http://www.blogger.com/rearrange?blogID=1304066656993695443&amp;widgetType=Image&amp;widgetId=Image1&amp;action=editWidget&amp;sectionId=sidebar-right-1" onclick="return _WidgetManager._PopupConfig(document.getElementById(&quot;Image1&quot;));" rel="nofollow" target="configImage1" title="Edit">
<img alt="" height="18" src="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/icon18_wrench_allbkg.png" width="18">
</a>
</span>
</span>
<div class="clear"></div>
</div><div class="widget BlogArchive" data-version="1" id="BlogArchive1">
<h2>Blog Archive</h2>
<div class="widget-content">
<div id="ArchiveList">
<div id="BlogArchive1_ArchiveList">
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://pauldone.blogspot.com/2018/">
2018
</a>
<span class="post-count" dir="ltr">(3)</span>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://pauldone.blogspot.com/2018/05/">
May
</a>
<span class="post-count" dir="ltr">(1)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://pauldone.blogspot.com/2018/04/">
April
</a>
<span class="post-count" dir="ltr">(1)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://pauldone.blogspot.com/2018/02/">
February
</a>
<span class="post-count" dir="ltr">(1)</span>
</li>
</ul>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate expanded">
<a class="toggle" href="javascript:void(0)">
<span class="zippy toggle-open">

        ▼&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://pauldone.blogspot.com/2017/">
2017
</a>
<span class="post-count" dir="ltr">(4)</span>
<ul class="hierarchy">
<li class="archivedate expanded">
<a class="toggle" href="javascript:void(0)">
<span class="zippy toggle-open">

        ▼&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://pauldone.blogspot.com/2017/07/">
July
</a>
<span class="post-count" dir="ltr">(1)</span>
<ul class="posts">
<li><a href="http://pauldone.blogspot.com/2017/07/sharded-mongodb-kubernetes.html">Deploying a MongoDB Sharded Cluster using Kubernet...</a></li>
</ul>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://pauldone.blogspot.com/2017/06/">
June
</a>
<span class="post-count" dir="ltr">(3)</span>
</li>
</ul>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://pauldone.blogspot.com/2016/">
2016
</a>
<span class="post-count" dir="ltr">(1)</span>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://pauldone.blogspot.com/2016/03/">
March
</a>
<span class="post-count" dir="ltr">(1)</span>
</li>
</ul>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://pauldone.blogspot.com/2015/">
2015
</a>
<span class="post-count" dir="ltr">(3)</span>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://pauldone.blogspot.com/2015/12/">
December
</a>
<span class="post-count" dir="ltr">(3)</span>
</li>
</ul>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://pauldone.blogspot.com/2014/">
2014
</a>
<span class="post-count" dir="ltr">(5)</span>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://pauldone.blogspot.com/2014/09/">
September
</a>
<span class="post-count" dir="ltr">(2)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://pauldone.blogspot.com/2014/05/">
May
</a>
<span class="post-count" dir="ltr">(1)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://pauldone.blogspot.com/2014/04/">
April
</a>
<span class="post-count" dir="ltr">(1)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://pauldone.blogspot.com/2014/03/">
March
</a>
<span class="post-count" dir="ltr">(1)</span>
</li>
</ul>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://pauldone.blogspot.com/2013/">
2013
</a>
<span class="post-count" dir="ltr">(1)</span>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://pauldone.blogspot.com/2013/04/">
April
</a>
<span class="post-count" dir="ltr">(1)</span>
</li>
</ul>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://pauldone.blogspot.com/2012/">
2012
</a>
<span class="post-count" dir="ltr">(4)</span>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://pauldone.blogspot.com/2012/10/">
October
</a>
<span class="post-count" dir="ltr">(2)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://pauldone.blogspot.com/2012/09/">
September
</a>
<span class="post-count" dir="ltr">(1)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://pauldone.blogspot.com/2012/01/">
January
</a>
<span class="post-count" dir="ltr">(1)</span>
</li>
</ul>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://pauldone.blogspot.com/2011/">
2011
</a>
<span class="post-count" dir="ltr">(4)</span>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://pauldone.blogspot.com/2011/10/">
October
</a>
<span class="post-count" dir="ltr">(1)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://pauldone.blogspot.com/2011/09/">
September
</a>
<span class="post-count" dir="ltr">(1)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://pauldone.blogspot.com/2011/03/">
March
</a>
<span class="post-count" dir="ltr">(1)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://pauldone.blogspot.com/2011/01/">
January
</a>
<span class="post-count" dir="ltr">(1)</span>
</li>
</ul>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://pauldone.blogspot.com/2010/">
2010
</a>
<span class="post-count" dir="ltr">(9)</span>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://pauldone.blogspot.com/2010/12/">
December
</a>
<span class="post-count" dir="ltr">(2)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://pauldone.blogspot.com/2010/08/">
August
</a>
<span class="post-count" dir="ltr">(3)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://pauldone.blogspot.com/2010/06/">
June
</a>
<span class="post-count" dir="ltr">(1)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://pauldone.blogspot.com/2010/02/">
February
</a>
<span class="post-count" dir="ltr">(3)</span>
</li>
</ul>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://pauldone.blogspot.com/2009/">
2009
</a>
<span class="post-count" dir="ltr">(5)</span>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://pauldone.blogspot.com/2009/12/">
December
</a>
<span class="post-count" dir="ltr">(2)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://pauldone.blogspot.com/2009/10/">
October
</a>
<span class="post-count" dir="ltr">(1)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://pauldone.blogspot.com/2009/09/">
September
</a>
<span class="post-count" dir="ltr">(1)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://pauldone.blogspot.com/2009/06/">
June
</a>
<span class="post-count" dir="ltr">(1)</span>
</li>
</ul>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://pauldone.blogspot.com/2008/">
2008
</a>
<span class="post-count" dir="ltr">(6)</span>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://pauldone.blogspot.com/2008/10/">
October
</a>
<span class="post-count" dir="ltr">(1)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://pauldone.blogspot.com/2008/09/">
September
</a>
<span class="post-count" dir="ltr">(1)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://pauldone.blogspot.com/2008/08/">
August
</a>
<span class="post-count" dir="ltr">(1)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://pauldone.blogspot.com/2008/05/">
May
</a>
<span class="post-count" dir="ltr">(1)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://pauldone.blogspot.com/2008/03/">
March
</a>
<span class="post-count" dir="ltr">(1)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://pauldone.blogspot.com/2008/02/">
February
</a>
<span class="post-count" dir="ltr">(1)</span>
</li>
</ul>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://pauldone.blogspot.com/2007/">
2007
</a>
<span class="post-count" dir="ltr">(4)</span>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://pauldone.blogspot.com/2007/08/">
August
</a>
<span class="post-count" dir="ltr">(1)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://pauldone.blogspot.com/2007/07/">
July
</a>
<span class="post-count" dir="ltr">(2)</span>
</li>
</ul>
<ul class="hierarchy">
<li class="archivedate collapsed">
<a class="toggle" href="javascript:void(0)">
<span class="zippy">

        ►&nbsp;
      
</span>
</a>
<a class="post-count-link" href="http://pauldone.blogspot.com/2007/03/">
March
</a>
<span class="post-count" dir="ltr">(1)</span>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div class="clear"></div>
<span class="widget-item-control">
<span class="item-control blog-admin">
<a class="quickedit" href="http://www.blogger.com/rearrange?blogID=1304066656993695443&amp;widgetType=BlogArchive&amp;widgetId=BlogArchive1&amp;action=editWidget&amp;sectionId=sidebar-right-1" onclick="return _WidgetManager._PopupConfig(document.getElementById(&quot;BlogArchive1&quot;));" rel="nofollow" target="configBlogArchive1" title="Edit">
<img alt="" height="18" src="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/icon18_wrench_allbkg.png" width="18">
</a>
</span>
</span>
<div class="clear"></div>
</div>
</div><div class="widget Label" data-version="1" id="Label1">
<h2>Labels</h2>
<div class="widget-content cloud-label-widget-content">
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/.NET">.NET</a>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/2-phase-commit">2-phase-commit</a>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/2PC">2PC</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/32-bit">32-bit</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/64-bit">64-bit</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/ACID">ACID</a>
</span>
<span class="label-size label-size-3">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Aggregation">Aggregation</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/analytics">analytics</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Anti-Affinity">Anti-Affinity</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/AOP">AOP</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/arithmetic">arithmetic</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Authentication">Authentication</a>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/BI%20Connector">BI Connector</a>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/book">book</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/calculation">calculation</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Cloudera">Cloudera</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Code-First">Code-First</a>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/coherence">coherence</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Connector">Connector</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/consistent">consistent</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/CRUD">CRUD</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/database">database</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/database.%20float.%20double.%20decimal.%20decimal128.%20BigDecimal.%20floating%20point">database. float. double. decimal. decimal128. BigDecimal. floating point</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/dcli">dcli</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Dependency%20Injection">Dependency Injection</a>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/disaster%20recovery">disaster recovery</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Dispatch">Dispatch</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/distributed%20transaction">distributed transaction</a>
</span>
<span class="label-size label-size-3">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Docker">Docker</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Docs">Docs</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Document-Literal">Document-Literal</a>
</span>
<span class="label-size label-size-3">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/DomainHealth">DomainHealth</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Downloads">Downloads</a>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/DR">DR</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Engineered%20Systems%20Exa%20Exalogic%20Exadata%20SPARC%20SuperCluster%20SSC">Engineered Systems Exa Exalogic Exadata SPARC SuperCluster SSC</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/enterprise">enterprise</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/eventually%20consistent">eventually consistent</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Exabus">Exabus</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/exadata">exadata</a>
</span>
<span class="label-size label-size-4">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/exalogic">exalogic</a>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/flight%20recorder">flight recorder</a>
</span>
<span class="label-size label-size-3">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/GCE">GCE</a>
</span>
<span class="label-size label-size-3">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/GKE">GKE</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Global%20Element">Global Element</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Global%20Type">Global Type</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/graph">graph</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/graphLookup">graphLookup</a>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/HA">HA</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Hadoop">Hadoop</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Harvest">Harvest</a>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Heap">Heap</a>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/high%20availability">high availability</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/hotspot">hotspot</a>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/HTTP">HTTP</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Hugemem">Hugemem</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Hugepages">Hugepages</a>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/infiniband">infiniband</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/InitialContext">InitialContext</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Instrumentation">Instrumentation</a>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Interoperability">Interoperability</a>
</span>
<span class="label-size label-size-3">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Java">Java</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/JAX-RPC">JAX-RPC</a>
</span>
<span class="label-size label-size-3">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/JAX-WS">JAX-WS</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/JConsole">JConsole</a>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/JMS">JMS</a>
</span>
<span class="label-size label-size-3">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/JMX">JMX</a>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/JRMC">JRMC</a>
</span>
<span class="label-size label-size-3">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/JRockit">JRockit</a>
</span>
<span class="label-size label-size-3">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/JVM">JVM</a>
</span>
<span class="label-size label-size-3">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Kubernetes">Kubernetes</a>
</span>
<span class="label-size label-size-3">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Linux">Linux</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/load%20balancer">load balancer</a>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/MapReduce">MapReduce</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/maximum%20heap%20size">maximum heap size</a>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/MBean">MBean</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Memory%20Leak">Memory Leak</a>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Messaging">Messaging</a>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Mission%20Control">Mission Control</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/modeling">modeling</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/money">money</a>
</span>
<span class="label-size label-size-4">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/mongodb">mongodb</a>
</span>
<span class="label-size label-size-3">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Monitoring">Monitoring</a>
</span>
<span class="label-size label-size-3">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/NoSQL">NoSQL</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/numactl">numactl</a>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/ODBC">ODBC</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/OEM">OEM</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/OneCommand">OneCommand</a>
</span>
<span class="label-size label-size-3">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Open%20Source">Open Source</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Optimisations">Optimisations</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Optimizations">Optimizations</a>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/oracle">oracle</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Oracle%20Service%20Bus">Oracle Service Bus</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Oracle%20Traffic%20Director">Oracle Traffic Director</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/OSI">OSI</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/OTD">OTD</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/PAE">PAE</a>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Parallel">Parallel</a>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/performance">performance</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/PermGen">PermGen</a>
</span>
<span class="label-size label-size-3">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/PersistentVolumeClaim">PersistentVolumeClaim</a>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/pipeline">pipeline</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Pitchfork">Pitchfork</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Postel%27s%20Law">Postel's Law</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/POWLS">POWLS</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/precision">precision</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Professional%20Oracle%20WebLogic%20Server">Professional Oracle WebLogic Server</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Provider">Provider</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/pymongo">pymongo</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/python">python</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/rac">rac</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Readline">Readline</a>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/recovery">recovery</a>
</span>
<span class="label-size label-size-3">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/replica-set">replica-set</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/replication">replication</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/REST">REST</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/rlwrap">rlwrap</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/RMI">RMI</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Roles">Roles</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Roles%20Allowed">Roles Allowed</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/RPC">RPC</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/RPC-Encoded">RPC-Encoded</a>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Schema">Schema</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/scientific">scientific</a>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/SDP">SDP</a>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/security">security</a>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/shard">shard</a>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/sidecar">sidecar</a>
</span>
<span class="label-size label-size-3">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/SOAP">SOAP</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Sockets%20Direct%20Protocol">Sockets Direct Protocol</a>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/solaris">solaris</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/sort">sort</a>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Spring">Spring</a>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/SQL">SQL</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/SQLPlus">SQLPlus</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/SSL">SSL</a>
</span>
<span class="label-size label-size-3">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/StatefulSet">StatefulSet</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/sun">sun</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/T3">T3</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Threads">Threads</a>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/TLOG">TLOG</a>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/transaction">transaction</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Ulimits">Ulimits</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/versioning">versioning</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Watch">Watch</a>
</span>
<span class="label-size label-size-3">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Web%20Services">Web Services</a>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Web%20Services%20Security">Web Services Security</a>
</span>
<span class="label-size label-size-5">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/WebLogic">WebLogic</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Wiley">Wiley</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/windows">windows</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/WiredTiger">WiredTiger</a>
</span>
<span class="label-size label-size-3">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/WLDF">WLDF</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/WLDF%20Console%20Extension">WLDF Console Extension</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/WLHostMachineStats">WLHostMachineStats</a>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/WLST">WLST</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Wrapped">Wrapped</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/Wrox">Wrox</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/WS-I">WS-I</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/WSDL">WSDL</a>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/WSDL-First">WSDL-First</a>
</span>
<span class="label-size label-size-2">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/XA">XA</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/XFS">XFS</a>
</span>
<span class="label-size label-size-1">
<a dir="ltr" href="http://pauldone.blogspot.com/search/label/XML">XML</a>
</span>
<div class="clear"></div>
<span class="widget-item-control">
<span class="item-control blog-admin">
<a class="quickedit" href="http://www.blogger.com/rearrange?blogID=1304066656993695443&amp;widgetType=Label&amp;widgetId=Label1&amp;action=editWidget&amp;sectionId=sidebar-right-1" onclick="return _WidgetManager._PopupConfig(document.getElementById(&quot;Label1&quot;));" rel="nofollow" target="configLabel1" title="Edit">
<img alt="" height="18" src="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/icon18_wrench_allbkg.png" width="18">
</a>
</span>
</span>
<div class="clear"></div>
</div>
</div><div class="widget Followers" data-version="1" id="Followers1">
<h2 class="title">Connections</h2>
<div class="widget-content">
<div id="Followers1-wrapper">
<div style="margin-right:2px;">
<div><script type="text/javascript" src="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/plusone.js" gapi_processed="true"></script>
<div id="followers-iframe-container"><iframe ng-non-bindable="" frameborder="0" hspace="0" marginheight="0" marginwidth="0" scrolling="no" style="" tabindex="0" vspace="0" width="100%" id="I0_1553882746406" name="I0_1553882746406" src="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/followers.html" height="934"></iframe></div>
<script type="text/javascript">
    window.followersIframe = null;
    function followersIframeOpen(url) {
      gapi.load("gapi.iframes", function() {
        if (gapi.iframes && gapi.iframes.getContext) {
          window.followersIframe = gapi.iframes.getContext().openChild({
            url: url,
            where: document.getElementById("followers-iframe-container"),
            messageHandlersFilter: gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER,
            messageHandlers: {
              '_ready': function(obj) {
                window.followersIframe.getIframeEl().height = obj.height;
              },
              'reset': function() {
                window.followersIframe.close();
                followersIframeOpen("https://www.blogger.com/followers.g?blogID\x3d1304066656993695443\x26colors\x3dCgt0cmFuc3BhcmVudBILdHJhbnNwYXJlbnQaByM0NDQ0NDQiByMzNzc4Y2QqByNlZWVlZWUyByM0NDQ0NDQ6ByM0NDQ0NDRCByMzNzc4Y2RKByM2NjY2NjZSByMzNzc4Y2RaC3RyYW5zcGFyZW50\x26pageSize\x3d21\x26postID\x3d1589304614399617387\x26origin\x3dhttp://pauldone.blogspot.com/");
              },
              'open': function(url) {
                window.followersIframe.close();
                followersIframeOpen(url);
              },
              'blogger-ping': function() {
              }
            }
          });
        }
      });
    }
    followersIframeOpen("https://www.blogger.com/followers.g?blogID\x3d1304066656993695443\x26colors\x3dCgt0cmFuc3BhcmVudBILdHJhbnNwYXJlbnQaByM0NDQ0NDQiByMzNzc4Y2QqByNlZWVlZWUyByM0NDQ0NDQ6ByM0NDQ0NDRCByMzNzc4Y2RKByM2NjY2NjZSByMzNzc4Y2RaC3RyYW5zcGFyZW50\x26pageSize\x3d21\x26postID\x3d1589304614399617387\x26origin\x3dhttp://pauldone.blogspot.com/");
  </script></div>
</div>
</div>
<div class="clear"></div>
<span class="widget-item-control">
<span class="item-control blog-admin">
<a class="quickedit" href="http://www.blogger.com/rearrange?blogID=1304066656993695443&amp;widgetType=Followers&amp;widgetId=Followers1&amp;action=editWidget&amp;sectionId=sidebar-right-1" onclick="return _WidgetManager._PopupConfig(document.getElementById(&quot;Followers1&quot;));" rel="nofollow" target="configFollowers1" title="Edit">
<img alt="" height="18" src="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/icon18_wrench_allbkg.png" width="18">
</a>
</span>
</span>
<div class="clear"></div>
</div>
</div></div>
<table border="0" cellpadding="0" cellspacing="0" class="section-columns columns-2">
<tbody>
<tr>
<td class="first columns-cell">
<div class="sidebar no-items section" id="sidebar-right-2-1"></div>
</td>
<td class="columns-cell">
<div class="sidebar no-items section" id="sidebar-right-2-2"></div>
</td>
</tr>
</tbody>
</table>
<div class="sidebar no-items section" id="sidebar-right-3"></div>
</aside>
</div>
</div>
</div>
<div style="clear: both"></div>
<!-- columns -->
</div>
<!-- main -->
</div>
</div>
<div class="main-cap-bottom cap-bottom">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
</div>
<footer>
<div class="footer-outer">
<div class="footer-cap-top cap-top">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
<div class="fauxborder-left footer-fauxborder-left">
<div class="fauxborder-right footer-fauxborder-right"></div>
<div class="region-inner footer-inner">
<div class="foot no-items section" id="footer-1"></div>
<table border="0" cellpadding="0" cellspacing="0" class="section-columns columns-2">
<tbody>
<tr>
<td class="first columns-cell">
<div class="foot no-items section" id="footer-2-1"></div>
</td>
<td class="columns-cell">
<div class="foot no-items section" id="footer-2-2"></div>
</td>
</tr>
</tbody>
</table>
<!-- outside of the include in order to lock Attribution widget -->
<div class="foot section" id="footer-3" name="Footer"><div class="widget Attribution" data-version="1" id="Attribution1">
<div class="widget-content" style="text-align: center;">
Awesome Inc. theme. Powered by <a href="https://www.blogger.com/" target="_blank">Blogger</a>.
</div>
<div class="clear"></div>
<span class="widget-item-control">
<span class="item-control blog-admin">
<a class="quickedit" href="http://www.blogger.com/rearrange?blogID=1304066656993695443&amp;widgetType=Attribution&amp;widgetId=Attribution1&amp;action=editWidget&amp;sectionId=footer-3" onclick="return _WidgetManager._PopupConfig(document.getElementById(&quot;Attribution1&quot;));" rel="nofollow" target="configAttribution1" title="Edit">
<img alt="" height="18" src="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/icon18_wrench_allbkg.png" width="18">
</a>
</span>
</span>
<div class="clear"></div>
</div></div>
</div>
</div>
<div class="footer-cap-bottom cap-bottom">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
</div>
</footer>
<!-- content -->
</div>
</div>
<div class="content-cap-bottom cap-bottom">
<div class="cap-left"></div>
<div class="cap-right"></div>
</div>
</div>
</div>
<script type="text/javascript">
    window.setTimeout(function() {
        document.body.className = document.body.className.replace('loading', '');
      }, 10);
  </script>
<script src="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/plusone.js" type="text/javascript" gapi_processed="true"></script>

<script type="text/javascript" src="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/1854097286-widgets.js"></script>
<script type="text/javascript">
window['__wavt'] = 'AOuZoY4k733FQbiJsHE-DWFbbyCZSEDJGg:1553882744711';_WidgetManager._Init('//www.blogger.com/rearrange?blogID\x3d1304066656993695443','//pauldone.blogspot.com/2017/07/sharded-mongodb-kubernetes.html','1304066656993695443');
_WidgetManager._SetDataContext([{'name': 'blog', 'data': {'blogId': '1304066656993695443', 'title': 'Paul Done\x27s Technical Blog', 'url': 'http://pauldone.blogspot.com/2017/07/sharded-mongodb-kubernetes.html', 'canonicalUrl': 'http://pauldone.blogspot.com/2017/07/sharded-mongodb-kubernetes.html', 'homepageUrl': 'http://pauldone.blogspot.com/', 'searchUrl': 'http://pauldone.blogspot.com/search', 'canonicalHomepageUrl': 'http://pauldone.blogspot.com/', 'blogspotFaviconUrl': 'http://pauldone.blogspot.com/favicon.ico', 'bloggerUrl': 'https://www.blogger.com', 'hasCustomDomain': false, 'httpsEnabled': true, 'enabledCommentProfileImages': true, 'gPlusViewType': 'FILTERED_POSTMOD', 'adultContent': false, 'analyticsAccountNumber': '', 'encoding': 'UTF-8', 'locale': 'en', 'localeUnderscoreDelimited': 'en', 'languageDirection': 'ltr', 'isPrivate': false, 'isMobile': false, 'isMobileRequest': false, 'mobileClass': '', 'isPrivateBlog': false, 'feedLinks': '\x3clink rel\x3d\x22alternate\x22 type\x3d\x22application/atom+xml\x22 title\x3d\x22Paul Done\x26#39;s Technical Blog - Atom\x22 href\x3d\x22http://pauldone.blogspot.com/feeds/posts/default\x22 /\x3e\n\x3clink rel\x3d\x22alternate\x22 type\x3d\x22application/rss+xml\x22 title\x3d\x22Paul Done\x26#39;s Technical Blog - RSS\x22 href\x3d\x22http://pauldone.blogspot.com/feeds/posts/default?alt\x3drss\x22 /\x3e\n\x3clink rel\x3d\x22service.post\x22 type\x3d\x22application/atom+xml\x22 title\x3d\x22Paul Done\x26#39;s Technical Blog - Atom\x22 href\x3d\x22https://www.blogger.com/feeds/1304066656993695443/posts/default\x22 /\x3e\n\n\x3clink rel\x3d\x22alternate\x22 type\x3d\x22application/atom+xml\x22 title\x3d\x22Paul Done\x26#39;s Technical Blog - Atom\x22 href\x3d\x22http://pauldone.blogspot.com/feeds/1589304614399617387/comments/default\x22 /\x3e\n', 'meTag': '', 'adsenseHostId': 'ca-host-pub-1556223355139109', 'adsenseHasAds': false, 'ieCssRetrofitLinks': '\x3c!--[if IE]\x3e\x3cscript type\x3d\x22text/javascript\x22 src\x3d\x22https://www.blogger.com/static/v1/jsbin/1953397912-ieretrofit.js\x22\x3e\x3c/script\x3e\n\x3c![endif]--\x3e', 'view': '', 'dynamicViewsCommentsSrc': '//www.blogblog.com/dynamicviews/4224c15c4e7c9321/js/comments.js', 'dynamicViewsScriptSrc': '//www.blogblog.com/dynamicviews/1b88e71bcbb33d46', 'plusOneApiSrc': 'https://apis.google.com/js/plusone.js', 'disableGComments': true, 'sharing': {'platforms': [{'name': 'Get link', 'key': 'link', 'shareMessage': 'Get link', 'target': ''}, {'name': 'Facebook', 'key': 'facebook', 'shareMessage': 'Share to Facebook', 'target': 'facebook'}, {'name': 'BlogThis!', 'key': 'blogThis', 'shareMessage': 'BlogThis!', 'target': 'blog'}, {'name': 'Twitter', 'key': 'twitter', 'shareMessage': 'Share to Twitter', 'target': 'twitter'}, {'name': 'Pinterest', 'key': 'pinterest', 'shareMessage': 'Share to Pinterest', 'target': 'pinterest'}, {'name': 'Email', 'key': 'email', 'shareMessage': 'Email', 'target': 'email'}], 'disableGooglePlus': true, 'googlePlusShareButtonWidth': 300, 'googlePlusBootstrap': '\x3cscript type\x3d\x22text/javascript\x22\x3ewindow.___gcfg \x3d {\x27lang\x27: \x27en\x27};\x3c/script\x3e'}, 'hasCustomJumpLinkMessage': false, 'jumpLinkMessage': 'Read more', 'pageType': 'item', 'postId': '1589304614399617387', 'postImageThumbnailUrl': 'https://4.bp.blogspot.com/-rxa7MdqxlrQ/WWtjlq7cwmI/AAAAAAAAAjk/dHEcDHy2AyoyUV7y0YXQ1Ia18leTCZTTwCLcBGAs/s72-c/k1.png', 'postImageUrl': 'https://4.bp.blogspot.com/-rxa7MdqxlrQ/WWtjlq7cwmI/AAAAAAAAAjk/dHEcDHy2AyoyUV7y0YXQ1Ia18leTCZTTwCLcBGAs/s640/k1.png', 'pageName': 'Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE', 'pageTitle': 'Paul Done\x27s Technical Blog: Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE'}}, {'name': 'features', 'data': {'sharing_get_link_dialog': 'true', 'sharing_native': 'false'}}, {'name': 'messages', 'data': {'edit': 'Edit', 'linkCopiedToClipboard': 'Link copied to clipboard!', 'ok': 'Ok', 'postLink': 'Post Link'}}, {'name': 'template', 'data': {'name': 'Awesome Inc.', 'localizedName': 'Awesome Inc.', 'isResponsive': false, 'isAlternateRendering': false, 'isCustom': false, 'variant': 'light', 'variantId': 'light'}}, {'name': 'view', 'data': {'classic': {'name': 'classic', 'url': '?view\x3dclassic'}, 'flipcard': {'name': 'flipcard', 'url': '?view\x3dflipcard'}, 'magazine': {'name': 'magazine', 'url': '?view\x3dmagazine'}, 'mosaic': {'name': 'mosaic', 'url': '?view\x3dmosaic'}, 'sidebar': {'name': 'sidebar', 'url': '?view\x3dsidebar'}, 'snapshot': {'name': 'snapshot', 'url': '?view\x3dsnapshot'}, 'timeslide': {'name': 'timeslide', 'url': '?view\x3dtimeslide'}, 'isMobile': false, 'title': 'Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE', 'description': '[Part 4 in a series of posts about running MongoDB on Kubernetes, with the Google&#160; Kubernetes &#160;Engine (GKE). For this post, a newer  GitHub ...', 'featuredImage': 'https://4.bp.blogspot.com/-rxa7MdqxlrQ/WWtjlq7cwmI/AAAAAAAAAjk/dHEcDHy2AyoyUV7y0YXQ1Ia18leTCZTTwCLcBGAs/s640/k1.png', 'url': 'http://pauldone.blogspot.com/2017/07/sharded-mongodb-kubernetes.html', 'type': 'item', 'isSingleItem': true, 'isMultipleItems': false, 'isError': false, 'isPage': false, 'isPost': true, 'isHomepage': false, 'isArchive': false, 'isLabelSearch': false, 'postId': 1589304614399617387}}]);
_WidgetManager._RegisterWidget('_NavbarView', new _WidgetInfo('Navbar1', 'navbar', document.getElementById('Navbar1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_HeaderView', new _WidgetInfo('Header1', 'header', document.getElementById('Header1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_BlogView', new _WidgetInfo('Blog1', 'main', document.getElementById('Blog1'), {'cmtInteractionsEnabled': false, 'lightboxEnabled': true, 'lightboxModuleUrl': 'https://www.blogger.com/static/v1/jsbin/2848338547-lbx.js', 'lightboxCssUrl': 'https://www.blogger.com/static/v1/v-css/368954415-lightbox_bundle.css'}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_ProfileView', new _WidgetInfo('Profile1', 'sidebar-right-1', document.getElementById('Profile1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_ImageView', new _WidgetInfo('Image1', 'sidebar-right-1', document.getElementById('Image1'), {'resize': true}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_BlogArchiveView', new _WidgetInfo('BlogArchive1', 'sidebar-right-1', document.getElementById('BlogArchive1'), {'languageDirection': 'ltr', 'loadingMessage': 'Loading\x26hellip;'}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_LabelView', new _WidgetInfo('Label1', 'sidebar-right-1', document.getElementById('Label1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_FollowersView', new _WidgetInfo('Followers1', 'sidebar-right-1', document.getElementById('Followers1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_AttributionView', new _WidgetInfo('Attribution1', 'footer-3', document.getElementById('Attribution1'), {}, 'displayModeFull'));
</script>

<link type="text/css" rel="stylesheet" href="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/368954415-lightbox_bundle.css"><script type="text/javascript" src="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/2848338547-lbx.js"></script><div id="goog-gt-tt" class="skiptranslate" dir="ltr"><div style="padding: 8px;"><div><div class="logo"><img src="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/translate_24dp.png" width="20" height="20" alt="Google Translate"></div></div></div><div class="top" style="padding: 8px; float: left; width: 100%;"><h1 class="title gray">Original text</h1></div><div class="middle" style="padding: 8px;"><div class="original-text"></div></div><div class="bottom" style="padding: 8px;"><div class="activity-links"><span class="activity-link">Contribute a better translation</span><span class="activity-link"></span></div><div class="started-activity-container"><hr style="color: #CCC; background-color: #CCC; height: 1px; border: none;"><div class="activity-root"></div></div></div><div class="status-message" style="display: none;"></div></div><div style="position: absolute; top: -10000px; z-index: 2000000000; border-radius: 4px; overflow: hidden; box-shadow: rgba(0, 0, 0, 0.3) 0px 4px 16px;"><iframe ng-non-bindable="" frameborder="0" hspace="0" marginheight="0" marginwidth="0" scrolling="no" style="border: none; margin-bottom: -4px;" tabindex="0" vspace="0" width="100%" id="I1_1553885468331" name="I1_1553885468331" src="./Paul Done&#39;s Technical Blog_ Deploying a MongoDB Sharded Cluster using Kubernetes StatefulSets on GKE_files/card.html"></iframe></div><div class="goog-te-spinner-pos"><div class="goog-te-spinner-animation"><svg xmlns="http://www.w3.org/2000/svg" class="goog-te-spinner" width="96px" height="96px" viewBox="0 0 66 66"><circle class="goog-te-spinner-path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle></svg></div></div></body></html>