if (self.CavalryLogger) { CavalryLogger.start_js(["c5UDp"]); }

__d("PluginConnectButtonType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({BLUE_BASE:1,WHITE_BASE:2})}),null);
__d("PluginConnectButton",["Arbiter","CSS","DOM","DOMEvent","DOMEventListener","Focus","FormSubmit","PlatformWidgetEndpoint","Plugin","PluginConnectButtonType","PluginOptin","URI"],(function(a,b,c,d,e,f){__p&&__p();var g="new",h=b("Arbiter").subscribe,i=function(a,c){return b("DOMEventListener").add(a,"click",c)};function a(a){__p&&__p();this.config=a;this.busy=!1;var c=b("DOM").find(a.form,".pluginConnectButton");this.buttons=c;this.node_connected=b("DOM").find(c,".pluginConnectButtonConnected");this.node_disconnected=b("DOM").find(c,".pluginConnectButtonDisconnected");var d=function(a){new(b("DOMEvent"))(a).kill(),this.busy||(this.submit(),this.busy=this.canpersonalize)}.bind(this);i(this.node_disconnected,d);a.buttontype===b("PluginConnectButtonType").BLUE_BASE?i(b("DOM").find(c,".pluginButtonX button"),d):a.buttontype===b("PluginConnectButtonType").WHITE_BASE&&i(this.node_connected,d);i(this.node_connected,function(a){return b("Arbiter").inform(b("Plugin").DIALOG,a)});c=this.update.bind(this);h(b("Plugin").CONNECT,c,g);h(b("Plugin").DISCONNECT,c,g);h(b("Plugin").ERROR,this.error.bind(this),g)}Object.assign(a.prototype,{update:function(a,c){__p&&__p();this.busy=!1;var d=this.config;if(c.identifier!==d.identifier)return;c=a===b("Plugin").CONNECT;a=b("PlatformWidgetEndpoint").plugins(d.plugin);a+="/"+(c?"disconnect":"connect");b("CSS")[c?"show":"hide"](this.node_connected);b("CSS")[c?"hide":"show"](this.node_disconnected);try{if(document.activeElement.nodeName.toLowerCase()==="button"){var e=c?this.node_connected:this.node_disconnected;e=b("DOM").find(e,"button");e.disabled=!1;b("Focus").set(e)}}catch(a){}d.connected=c;d.form.setAttribute("action",a);d.form.setAttribute("ajaxify",a)},error:function(a,c){this.busy=!1;if(c.action in{connect:1,disconnect:1}){b("DOM").setContent(this.buttons,c.content);a=b("DOM").scry(this.buttons,".confirmButton");a.length===1&&b("Focus").set(a[0])}},submit:function(){if(!this.config.canpersonalize)return this.login();b("FormSubmit").send(this.config.form);this.fireStateToggle()},fireStateToggle:function(){var a=this.config;a.connected?b("Plugin").disconnect(a.identifier):b("Plugin").connect(a.identifier)},login:function(){var a=this.config.plugin;new(b("PluginOptin"))(a,b("URI").getRequestURI().getQueryData().api_key).addReturnParams({act:"connect"}).addLoginParams({social_plugin_action:this.config.pluginaction,kid_directed_site:this.config.kidDirectedSite}).start()}});e.exports=a}),null);